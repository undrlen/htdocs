<?php
 namespace UmiCms\System\Cache\Browser\Engine;use UmiCms\System\Cache\Browser\Engine;class LastModified extends Engine {public function process() {$vd1fc8eaf36937be0c3ba8cfe0a2c1bfe = $this->getResponse();$v5fa40b2485d1096a170d2d7ecd0f7030 = $vd1fc8eaf36937be0c3ba8cfe0a2c1bfe->getUpdateTime();$v7f2db423a49b305459147332fb01cf87 = $vd1fc8eaf36937be0c3ba8cfe0a2c1bfe->getCurrentBuffer();$v7f2db423a49b305459147332fb01cf87->setHeader('Last-Modified', $this->formatHtmlDate($v5fa40b2485d1096a170d2d7ecd0f7030));$v7f2db423a49b305459147332fb01cf87->setHeader('Cache-Control', $this->getCacheControl());$v7f2db423a49b305459147332fb01cf87->setHeader('Pragma', $this->getPragma());if ($this->isFresh($v5fa40b2485d1096a170d2d7ecd0f7030)) {$this->sendNotModified();}}protected function getCacheControl() {return sprintf('%s, no-cache, must-revalidate', $this->getCacheControlPrivacy());}protected function getPragma() {return 'no-cache';}private function isFresh($v5fa40b2485d1096a170d2d7ecd0f7030) {$vcf1e8c14e54505f60aa10ceb8d5d8ab3 = $this->getRequest()    ->Server();$v37821b2a5fbd5aedd68cd165350a1b6b = 'HTTP_IF_MODIFIED_SINCE';return $vcf1e8c14e54505f60aa10ceb8d5d8ab3->isExist($v37821b2a5fbd5aedd68cd165350a1b6b) && strtotime($vcf1e8c14e54505f60aa10ceb8d5d8ab3->get($v37821b2a5fbd5aedd68cd165350a1b6b)) >= $v5fa40b2485d1096a170d2d7ecd0f7030;}}