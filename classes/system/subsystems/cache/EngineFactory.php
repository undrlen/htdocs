<?php
 namespace UmiCms\System\Cache;class EngineFactory implements iEngineFactory {private $engineList = [];public function create($vb068931cc450442b63f5b3d276ea4297 = \databaseCacheEngine::NAME) {if ($this->isLoaded($vb068931cc450442b63f5b3d276ea4297)) {return $this->getLoadedEngine($vb068931cc450442b63f5b3d276ea4297);}$vad1943a9fd6d3d7ee1e6af41a5b0d3e7 = $this->loadEngine($vb068931cc450442b63f5b3d276ea4297);$this->setLoadedEngine($vad1943a9fd6d3d7ee1e6af41a5b0d3e7);return $vad1943a9fd6d3d7ee1e6af41a5b0d3e7;}public function createNew($vb068931cc450442b63f5b3d276ea4297) {$vad1943a9fd6d3d7ee1e6af41a5b0d3e7 = $this->loadEngine($vb068931cc450442b63f5b3d276ea4297);if (!$this->isLoaded($vb068931cc450442b63f5b3d276ea4297)) {$this->setLoadedEngine($vad1943a9fd6d3d7ee1e6af41a5b0d3e7);}return $vad1943a9fd6d3d7ee1e6af41a5b0d3e7;}private function isLoaded($vb068931cc450442b63f5b3d276ea4297) {return isset($this->engineList[$vb068931cc450442b63f5b3d276ea4297]);}private function getLoadedEngine($vb068931cc450442b63f5b3d276ea4297) {if (!$this->isLoaded($vb068931cc450442b63f5b3d276ea4297)) {throw new \coreException(sprintf('Cache engine "%s" not loaded', $vb068931cc450442b63f5b3d276ea4297));}return $this->engineList[$vb068931cc450442b63f5b3d276ea4297];}private function setLoadedEngine(\iCacheEngine $vad1943a9fd6d3d7ee1e6af41a5b0d3e7) {$this->engineList[$vad1943a9fd6d3d7ee1e6af41a5b0d3e7->getName()] = $vad1943a9fd6d3d7ee1e6af41a5b0d3e7;return $this;}private function getEngineClass($vb068931cc450442b63f5b3d276ea4297) {return $vb068931cc450442b63f5b3d276ea4297 . 'CacheEngine';}private function getEngineFilePath($vb068931cc450442b63f5b3d276ea4297) {return SYS_KERNEL_PATH . 'subsystems/cache/engines/' . $vb068931cc450442b63f5b3d276ea4297 . '.php';}private function loadEngine($vb068931cc450442b63f5b3d276ea4297) {$v6f66e878c62db60568a3487869695820 = $this->getEngineClass($vb068931cc450442b63f5b3d276ea4297);if (class_exists($v6f66e878c62db60568a3487869695820)) {return new $v6f66e878c62db60568a3487869695820;}$v47826cacc65c665212b821e6ff80b9b0 = $this->getEngineFilePath($vb068931cc450442b63f5b3d276ea4297);if (!file_exists($v47826cacc65c665212b821e6ff80b9b0)) {throw new \coreException(sprintf('File "%s" not found', $v47826cacc65c665212b821e6ff80b9b0));}include_once $v47826cacc65c665212b821e6ff80b9b0;if (class_exists($v6f66e878c62db60568a3487869695820)) {return new $v6f66e878c62db60568a3487869695820;}throw new \coreException(sprintf('Cache engine "%s" not found', $vb068931cc450442b63f5b3d276ea4297));}}