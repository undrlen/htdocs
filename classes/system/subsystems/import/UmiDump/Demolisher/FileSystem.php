<?php
 namespace UmiCms\System\Import\UmiDump\Demolisher;use UmiCms\System\Import\UmiDump\Demolisher;use UmiCms\Classes\System\Entities\Directory\iFactory as DirectoryFactory;use UmiCms\System\Import\UmiDump\Helper\File\Path\iConverter as FilePathConverter;abstract class FileSystem extends Demolisher implements iFileSystem {private $rootPath;private $directoryFactory;private $filePathConverter;public function setRootPath($vd6fe1d0be6347b8ef2427fa629c04485) {$this->rootPath = $vd6fe1d0be6347b8ef2427fa629c04485;return $this;}public function setFilePathConverter(FilePathConverter $vfd3335f63d96e3bf0b6526fc70d779e3) {$this->filePathConverter = $vfd3335f63d96e3bf0b6526fc70d779e3;return $this;}protected function setDirectoryFactory(DirectoryFactory $vb7a82c37d8c13db7202ec4890aa47a7d) {$this->directoryFactory = $vb7a82c37d8c13db7202ec4890aa47a7d;return $this;}protected function getDirectoryFactory() {if (!$this->directoryFactory instanceof DirectoryFactory) {throw new \RequiredPropertyHasNoValueException('You should inject DirectoryFactory first');}return $this->directoryFactory;}protected function getDestinationPath($ve52907b281ebc39f748c5e9af1646256) {$v5f5ead14691e097161e4a114412931ae = $this->buildAbsolutePath($ve52907b281ebc39f748c5e9af1646256);$vb07f49e4701f71da11e9d57a336823da = $this->getOriginalSourceName();$ved1906f232fadc29492f0f160e411437 = $this->getSourceName();if ($vb07f49e4701f71da11e9d57a336823da !== $ved1906f232fadc29492f0f160e411437) {$vd70f3719aeb1253a3df77375d2589e7f = $this->getFilePathConverter()     ->setSuffix($ved1906f232fadc29492f0f160e411437)     ->convert($v5f5ead14691e097161e4a114412931ae);if (file_exists($vd70f3719aeb1253a3df77375d2589e7f)) {return $vd70f3719aeb1253a3df77375d2589e7f;}}return $v5f5ead14691e097161e4a114412931ae;}protected function deleteDirectory($vd6fe1d0be6347b8ef2427fa629c04485) {$v5f8f22b8cdbaeee8cf857673a9b6ba20 = $this->getDirectoryFactory()    ->create($vd6fe1d0be6347b8ef2427fa629c04485);if (!$v5f8f22b8cdbaeee8cf857673a9b6ba20->isExists()) {$this->pushLog(sprintf('Directory "%s" not exists', $v5f8f22b8cdbaeee8cf857673a9b6ba20->getPath()));return false;}$v9acb44549b41563697bb490144ec6258 = $v5f8f22b8cdbaeee8cf857673a9b6ba20->deleteEmptyDirectory() ? 'was deleted' : 'was not deleted';$this->pushLog(sprintf('Directory "%s" %s', $v5f8f22b8cdbaeee8cf857673a9b6ba20->getPath(), $v9acb44549b41563697bb490144ec6258));return $this->deleteDirectory($v5f8f22b8cdbaeee8cf857673a9b6ba20->getParentPath());}protected function getRootPath() {return rtrim($this->rootPath ?: CURRENT_WORKING_DIR, '/');}protected function buildAbsolutePath($v854c6c62527722d75943fe3e6f81914b) {return $this->getRootPath() . '/' . ltrim($v854c6c62527722d75943fe3e6f81914b, '/');}private function getFilePathConverter() {return $this->filePathConverter;}}