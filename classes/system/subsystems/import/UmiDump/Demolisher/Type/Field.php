<?php
 namespace UmiCms\System\Import\UmiDump\Demolisher\Type;use UmiCms\System\Import\UmiDump\Demolisher;class Field extends Demolisher {private $fieldCollection;private $objectTypeCollection;public function __construct(\iUmiFieldsCollection $vc08b50415eb1a67928fe59c937252cde, \iUmiObjectTypesCollection $v8d51528cb018f443ee726b3b85da495b) {$this->fieldCollection = $vc08b50415eb1a67928fe59c937252cde;$this->objectTypeCollection = $v8d51528cb018f443ee726b3b85da495b;}protected function execute() {$vb508148712cb53958c7e3d25ec86d72a = $this->getSourceIdBinder();$v52195dae0174459c5f066fa0df053c26 = $this->getSourceId();$v8d51528cb018f443ee726b3b85da495b = $this->getObjectTypeCollection();$vc08b50415eb1a67928fe59c937252cde = $this->getFieldCollection();foreach ($this->getFieldExtNameTree() as $v7d0aaac5858d436af103d1ee61ef558d => $v3b1ea62d5c90848b23bb29505039c928) {$v5f694956811487225d15e973ca38fbab = $vb508148712cb53958c7e3d25ec86d72a->getNewTypeIdRelation($v52195dae0174459c5f066fa0df053c26, $v7d0aaac5858d436af103d1ee61ef558d);$v599dcce2998a6b40b1e38e8c6006cb0a = $v8d51528cb018f443ee726b3b85da495b->getType($v5f694956811487225d15e973ca38fbab);if (!$v599dcce2998a6b40b1e38e8c6006cb0a instanceof \iUmiObjectType) {$this->pushLog(sprintf('Field of type "%s" was ignored', $v7d0aaac5858d436af103d1ee61ef558d));continue;}foreach ($v3b1ea62d5c90848b23bb29505039c928 as $vd3d01c6615f3d42667de2f7fcaf80316) {$v945100186b119048837b9859c2c46410 = $vb508148712cb53958c7e3d25ec86d72a->getNewFieldId($v52195dae0174459c5f066fa0df053c26, $v5f694956811487225d15e973ca38fbab, $vd3d01c6615f3d42667de2f7fcaf80316);if ($v945100186b119048837b9859c2c46410 === false || $vb508148712cb53958c7e3d25ec86d72a->isFieldRelatedToAnotherSource($v52195dae0174459c5f066fa0df053c26, $v945100186b119048837b9859c2c46410)) {$this->pushLog(sprintf('Field "%s" was ignored', $vd3d01c6615f3d42667de2f7fcaf80316));continue;}$vc08b50415eb1a67928fe59c937252cde->delById($v945100186b119048837b9859c2c46410);$this->pushLog(sprintf('Field "%s" was deleted', $v945100186b119048837b9859c2c46410));}}}private function getFieldExtNameTree() {$result = [];$result = $this->getNodeValueTree(    $result,    '/umidump/types/type',    'id',    'fieldgroups/group/field/@name'   );$result = $this->getNodeValueTree(    $result,    '/umidump/pages/page',    'type-id',    'properties/group/property/@name'   );$result = $this->getNodeValueTree(    $result,    '/umidump/objects/object',    'type-id',    'properties/group/property/@name'   );return $result;}private function getFieldCollection() {return $this->fieldCollection;}private function getObjectTypeCollection() {return $this->objectTypeCollection;}}