<?php
 use UmiCms\Service;use UmiCms\System\Import\UmiDump\Entity\Helper\SourceIdBinder\Factory\Injector as SourceIdBinderInjector;class MailTemplatesCollection implements  iUmiDataBaseInjector,  iUmiService,  iUmiCollection,  iUmiConstantMapInjector,  iClassConfigManager {use tUmiDataBaseInjector;use tUmiService;use tCommonCollection;use tUmiConstantMapInjector;use tClassConfigManager;use SourceIdBinderInjector;private $collectionItemClass = 'MailTemplate';private static $classConfig = [   'service' => 'MailTemplates',   'fields' => [    [     'name' => 'ID_FIELD_NAME',     'type' => 'INTEGER_FIELD_TYPE',     'used-in-creation' => false    ],    [     'name' => 'NOTIFICATION_ID_FIELD_NAME',     'type' => 'INTEGER_FIELD_TYPE',    ],    [     'name' => 'NAME_FIELD_NAME',     'type' => 'STRING_FIELD_TYPE',     'required' => true,    ],    [     'name' => 'TYPE_FIELD_NAME',     'type' => 'STRING_FIELD_TYPE',     'required' => true,    ],    [     'name' => 'CONTENT_FIELD_NAME',     'type' => 'STRING_FIELD_TYPE',     'required' => true,    ]   ],   'create-prepare-instancing-callback' => 'unEscapeStringValues'  ];public function getTableName() {return $this->getMap()->get('TABLE_NAME');}public function getCollectionItemClass() {return $this->collectionItemClass;}public function unEscapeStringValues(array $vd05b6ed7d2345020440df396d6da7f73, array $vf09cc7ee3a9a93273f4b80601cafb00c, array $v15833b3badf82b4004598589a7c150e3, array $v21ffce5b8a6cc8cc6a41448dd69623c9) {$v1d78dc8ed51214e518b5114fe24490ae = $this->getMap();foreach ($v15833b3badf82b4004598589a7c150e3 as $v016e99ea0efc76df33184273127355b7) {$v833750ac635fcc57dc33ecafe365f9a7 = $v1d78dc8ed51214e518b5114fe24490ae->get($v016e99ea0efc76df33184273127355b7['type']);$v972bf3f05d14ffbdb817bef60638ff00 = $v1d78dc8ed51214e518b5114fe24490ae->get($v016e99ea0efc76df33184273127355b7['name']);if ($v833750ac635fcc57dc33ecafe365f9a7 === $v1d78dc8ed51214e518b5114fe24490ae->get('STRING_FIELD_TYPE') && isset($vf09cc7ee3a9a93273f4b80601cafb00c[$v972bf3f05d14ffbdb817bef60638ff00]) &&     isset($v21ffce5b8a6cc8cc6a41448dd69623c9[$v972bf3f05d14ffbdb817bef60638ff00])) {$vf09cc7ee3a9a93273f4b80601cafb00c[$v972bf3f05d14ffbdb817bef60638ff00] = $v21ffce5b8a6cc8cc6a41448dd69623c9[$v972bf3f05d14ffbdb817bef60638ff00];}}return $vf09cc7ee3a9a93273f4b80601cafb00c;}public function createTemplate($vb068931cc450442b63f5b3d276ea4297, $v9a0364b9e99bb480dd25e1f0284c8555) {$v1d78dc8ed51214e518b5114fe24490ae = $this->getMap();return $this->create([    $v1d78dc8ed51214e518b5114fe24490ae->get('NAME_FIELD_NAME') => $vb068931cc450442b63f5b3d276ea4297,    $v1d78dc8ed51214e518b5114fe24490ae->get('CONTENT_FIELD_NAME') => $v9a0364b9e99bb480dd25e1f0284c8555,   ]);}public function getCreateTemplate($vb068931cc450442b63f5b3d276ea4297, $v9a0364b9e99bb480dd25e1f0284c8555 = '') {$v66f6181bcb4cff4cd38fbc804a036db6 = $this->getByName($vb068931cc450442b63f5b3d276ea4297);$v80fd92c019d4b7c2299492f4ad549e67 = $this->getCollectionItemClass();if ($v66f6181bcb4cff4cd38fbc804a036db6 instanceof $v80fd92c019d4b7c2299492f4ad549e67) {return $v66f6181bcb4cff4cd38fbc804a036db6;}return $this->createTemplate($vb068931cc450442b63f5b3d276ea4297, $v9a0364b9e99bb480dd25e1f0284c8555);}public function getByName($vb068931cc450442b63f5b3d276ea4297) {return $this->getBy($this->getMap()->get('NAME_FIELD_NAME'), $vb068931cc450442b63f5b3d276ea4297);}public function getByNotificationId($vb80bb7740288fda1f201890375a60c8f) {return $this->get([    $this->getMap()->get('NOTIFICATION_ID_FIELD_NAME') => $vb80bb7740288fda1f201890375a60c8f   ]);}public function updateRelatedId(array $v74693d2fc58b46bd06410f278e39aa71, $v52195dae0174459c5f066fa0df053c26) {if (isset($v74693d2fc58b46bd06410f278e39aa71['notification_id'])) {$v1a3c00ce27b98ca3fc020990b28f62c1 = $this->getSourceIdBinderFactory()     ->create($v52195dae0174459c5f066fa0df053c26);$va03acd8943baebf6a00aeb6792340e18 = Service::get('MailNotifications');$vaab9e1de16f38176f86d7a92ba337a8d = $va03acd8943baebf6a00aeb6792340e18->getMap()     ->get('EXCHANGE_RELATION_TABLE_NAME');$v390e5b152c952a92ad629c3c8b06663f = $v74693d2fc58b46bd06410f278e39aa71['notification_id'];$vff9cf219aa220e28c4427f9f02a4b294 = $v1a3c00ce27b98ca3fc020990b28f62c1->getInternalId($v390e5b152c952a92ad629c3c8b06663f, $vaab9e1de16f38176f86d7a92ba337a8d);if ($vff9cf219aa220e28c4427f9f02a4b294 !== null) {$v74693d2fc58b46bd06410f278e39aa71['notification_id'] = $vff9cf219aa220e28c4427f9f02a4b294;}}return $v74693d2fc58b46bd06410f278e39aa71;}}