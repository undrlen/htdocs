<?php
 class CompressDirectoryAction extends Action {protected $outputFileName;public function execute() {$v207e5b7e7d2b07f6b19066e8d62f4b1d = $this->getParam('target-directory');$vc9db0d9cdbf3dab7ae304d2b8fe6f5d8 = $this->getParam('output-file-name');$this->outputFileName = $vc9db0d9cdbf3dab7ae304d2b8fe6f5d8;if (mb_substr($v207e5b7e7d2b07f6b19066e8d62f4b1d, 1, 1) == ':') {$vba237047d6b3d7c06a2bf8b749d226b7 = mb_substr($v207e5b7e7d2b07f6b19066e8d62f4b1d, 2);}else {$vba237047d6b3d7c06a2bf8b749d226b7 = $v207e5b7e7d2b07f6b19066e8d62f4b1d;}$vadcdbd79a8d84175c229b192aadc02f2 = new UmiZipArchive($vc9db0d9cdbf3dab7ae304d2b8fe6f5d8);$result = $vadcdbd79a8d84175c229b192aadc02f2->create($v207e5b7e7d2b07f6b19066e8d62f4b1d, $vba237047d6b3d7c06a2bf8b749d226b7);if ($result == 0) {throw new Exception('Failed to create zip file: "' . $vadcdbd79a8d84175c229b192aadc02f2->errorInfo() . '"');}chmod($vc9db0d9cdbf3dab7ae304d2b8fe6f5d8, 0777);}public function rollback() {if (is_file($this->outputFileName)) {unlink($this->outputFileName);}}}