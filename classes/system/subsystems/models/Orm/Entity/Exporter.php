<?php
 namespace UmiCms\System\Orm\Entity;use \iXmlExporter as iBaseExporter;use UmiCms\System\Import\UmiDump\Helper\Entity\iSourceIdBinder;use UmiCms\System\Orm\Entity\Schema\tInjector as tSchemaInjector;use UmiCms\System\Orm\Entity\Facade\tInjector as tFacadeInjector;abstract class Exporter implements iExporter {use tSchemaInjector;use tFacadeInjector;public function __construct(iFacade $v00c169d5e8a598d3908199ef8c64c279, iSchema $vc9550d5fad73447fc24ba47f95d1c6b7) {$this->setFacade($v00c169d5e8a598d3908199ef8c64c279)    ->setSchema($vc9550d5fad73447fc24ba47f95d1c6b7);}public function export(array $v5a2576254d428ddc22a03fac145c8749, iBaseExporter $ved780287e302ec3b9fd3c5e78771919f) {$vdb6d9b451b818ccc9a449383f2f0c450 = $this->getFacade()->getCollectionByIdList($v5a2576254d428ddc22a03fac145c8749);$ve7143c35e910d05210552bcc5b236bc8 = $this->getRelationMap($vdb6d9b451b818ccc9a449383f2f0c450->extractId(), $ved780287e302ec3b9fd3c5e78771919f);return $this->changeIdInternalToExternal($vdb6d9b451b818ccc9a449383f2f0c450->map(), $ve7143c35e910d05210552bcc5b236bc8, $ved780287e302ec3b9fd3c5e78771919f->getEntitySourceIdBinder());}public function getRelationMap(array $v689f9b0d90e82b15fbd75db891fc65b5, iBaseExporter $ved780287e302ec3b9fd3c5e78771919f) {return $ved780287e302ec3b9fd3c5e78771919f->getEntitySourceIdBinder()    ->getExternalIdList($v689f9b0d90e82b15fbd75db891fc65b5, $this->getTable());}protected function getTable() {return $this->getSchema()->getExchangeName();}protected function changeIdInternalToExternal(array $v143ce450506b6edea68d98ba0662fb4e, array $ve7143c35e910d05210552bcc5b236bc8, iSourceIdBinder $vb508148712cb53958c7e3d25ec86d72a) {$v8f860260e98c7b73cb53d4d3eba7f7f8 = [];$result = [];foreach ($v143ce450506b6edea68d98ba0662fb4e as $v6a992d5529f459a44fee58c733255e86 => $vf1965a857bc285d26fe22023aa5ab50d) {$v1c043be0eed6949c174fcf4359f7c601 = $vf1965a857bc285d26fe22023aa5ab50d['id'];if (isset($ve7143c35e910d05210552bcc5b236bc8[$v1c043be0eed6949c174fcf4359f7c601])) {$vf1965a857bc285d26fe22023aa5ab50d['id'] = $ve7143c35e910d05210552bcc5b236bc8[$v1c043be0eed6949c174fcf4359f7c601];}else {$v8f860260e98c7b73cb53d4d3eba7f7f8[$v1c043be0eed6949c174fcf4359f7c601] = $v1c043be0eed6949c174fcf4359f7c601;}$vb80bb7740288fda1f201890375a60c8f = $vf1965a857bc285d26fe22023aa5ab50d['id'];$result[$vb80bb7740288fda1f201890375a60c8f] = $vf1965a857bc285d26fe22023aa5ab50d;}$vb508148712cb53958c7e3d25ec86d72a->defineRelationList($v8f860260e98c7b73cb53d4d3eba7f7f8, $this->getTable());return $result;}}