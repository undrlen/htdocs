<?php
 namespace UmiCms\System\Orm\Entity;use UmiCms\System\Orm\Entity\Relation\Accessor\tInjector as tRelationAccessorInjector;abstract class Schema implements iSchema {use tRelationAccessorInjector;const CONTAINER_PREFIX = 'cms3';const EXCHANGE_PREFIX = 'cms3_import';const POSTFIX = 'list';const SEPARATOR = '_';public function __construct(iAccessor $v9efcb42ee143be09c45d33ed2fba175b) {$this->setRelationAccessor($v9efcb42ee143be09c45d33ed2fba175b);}public function getContainerName() {return $this->buildName(self::CONTAINER_PREFIX);}public function getExchangeName() {return $this->buildName(self::EXCHANGE_PREFIX);}public function getRelationFieldList() {$vca3a34ad419c2f783bc2dbda90d53c41 = array_filter($this->getRelationAccessor()->getPropertyList(), function($v06e3d36fa30cea095545139854ad1fb9) {return !contains($v06e3d36fa30cea095545139854ad1fb9, 'collection');});$v4ec1b477cd0232b832c1899905ec51a4 = $this->getRelationFieldSuffix();$v69fe4aec8073954bf273e3113edd24cf = [];foreach ($vca3a34ad419c2f783bc2dbda90d53c41 as $v6a992d5529f459a44fee58c733255e86 => $v1a8db4c996d8ed8289da5f957879ab94) {$v06e3d36fa30cea095545139854ad1fb9 = sprintf('%s%s', $v1a8db4c996d8ed8289da5f957879ab94, $v4ec1b477cd0232b832c1899905ec51a4);$v69fe4aec8073954bf273e3113edd24cf[$v06e3d36fa30cea095545139854ad1fb9] = $v06e3d36fa30cea095545139854ad1fb9;}return $v69fe4aec8073954bf273e3113edd24cf;}public function getRelatedContainerNameList() {$ve6df601b5239751516350ae1920da979 = $this->buildRelatedNameList(self::CONTAINER_PREFIX);$vfee7503351b1d4ee3959e6a2109477a7 = $this->getRelatedContainerCustomNameList();return array_merge($ve6df601b5239751516350ae1920da979, $vfee7503351b1d4ee3959e6a2109477a7);}public function getRelatedExchangeNameList() {$ve6df601b5239751516350ae1920da979 = $this->buildRelatedNameList(self::EXCHANGE_PREFIX);$vfee7503351b1d4ee3959e6a2109477a7 = $this->getRelatedExchangeCustomNameList();return array_merge($ve6df601b5239751516350ae1920da979, $vfee7503351b1d4ee3959e6a2109477a7);}protected function getRelatedContainerCustomNameList() {return [];}protected function getRelatedExchangeCustomNameList() {return [];}abstract protected function getNameSpaceRoot();protected function getRelationFieldSuffix() {return sprintf('%sid', self::SEPARATOR, 'id');}protected function getNameSpace() {$v40f3468cd695958c102d657febf859cc = new \ReflectionClass($this);return $v40f3468cd695958c102d657febf859cc->getNamespaceName();}protected function buildRelatedNameList($v851f5ac9941d720844d143ed9cfcf60a) {$v4ec1b477cd0232b832c1899905ec51a4 = $this->getRelationFieldSuffix();$vfbfe0fa727f19e878cfe4fb2d46c5720 = [];foreach ($this->getRelationFieldList() as $v06e3d36fa30cea095545139854ad1fb9) {$vb586e09ccdd309a0a18b5e0d5c2bfd02 = $this->getNameSpacePartList();$v6604a2c17278cd517e2c0bf6ab8dfdd0 =  str_replace($v4ec1b477cd0232b832c1899905ec51a4, '', $v06e3d36fa30cea095545139854ad1fb9);if (in_array($v6604a2c17278cd517e2c0bf6ab8dfdd0, $vb586e09ccdd309a0a18b5e0d5c2bfd02)) {$vb586e09ccdd309a0a18b5e0d5c2bfd02 = [];}$vb586e09ccdd309a0a18b5e0d5c2bfd02[] = str_replace($v4ec1b477cd0232b832c1899905ec51a4, '', $v06e3d36fa30cea095545139854ad1fb9);$v5c055104b4311861d94893f11a353eb7 = $this->buildName($v851f5ac9941d720844d143ed9cfcf60a, $vb586e09ccdd309a0a18b5e0d5c2bfd02);$vfbfe0fa727f19e878cfe4fb2d46c5720[$v06e3d36fa30cea095545139854ad1fb9] = $v5c055104b4311861d94893f11a353eb7;}return $vfbfe0fa727f19e878cfe4fb2d46c5720;}protected function buildName($v851f5ac9941d720844d143ed9cfcf60a, array $vdc88ac0624345f4c869d4e4871c30648 = []) {$vdc88ac0624345f4c869d4e4871c30648 = (isEmptyArray($vdc88ac0624345f4c869d4e4871c30648)) ? $this->getNameSpacePartList() : $vdc88ac0624345f4c869d4e4871c30648;$v303619f899f8ee729105501399b9ee98 = array_merge([$v851f5ac9941d720844d143ed9cfcf60a], $vdc88ac0624345f4c869d4e4871c30648);$v303619f899f8ee729105501399b9ee98 = array_merge($v303619f899f8ee729105501399b9ee98, [self::POSTFIX]);return implode(self::SEPARATOR, $v303619f899f8ee729105501399b9ee98);}protected function getNameSpacePartList() {$ve8e7656ef263a3228b71295aeb7f8dcb = str_replace($this->getNameSpaceRoot(), '', $this->getNameSpace());$vf0f6c91b397aa985d76a51cf9aeaabda = mb_convert_case($ve8e7656ef263a3228b71295aeb7f8dcb, MB_CASE_LOWER);return explode('\\', $vf0f6c91b397aa985d76a51cf9aeaabda);}}