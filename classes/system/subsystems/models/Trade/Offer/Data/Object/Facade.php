<?php
 namespace UmiCms\System\Trade\Offer\Data\Object;use \iUmiObject as iObject;use UmiCms\System\Trade\iOffer;use \iUmiObjectsCollection as iCollection;use UmiCms\System\Trade\Offer\Data\Object\Type\iFacade as iTypeFacade;class Facade implements iFacade {private $collection;private $typeFacade;public function __construct(iCollection $vdb6d9b451b818ccc9a449383f2f0c450, iTypeFacade $v585be0ab2e7b8c75397b0d047a05925d) {$this->setCollection($vdb6d9b451b818ccc9a449383f2f0c450)    ->setTypeFacade($v585be0ab2e7b8c75397b0d047a05925d);}public function get($vb80bb7740288fda1f201890375a60c8f) {$va8cfde6331bd59eb2ac96f8911c4b666 = $this->getCollection()    ->getById($vb80bb7740288fda1f201890375a60c8f);if (!$va8cfde6331bd59eb2ac96f8911c4b666 instanceof iObject) {return null;}return $this->initObject($va8cfde6331bd59eb2ac96f8911c4b666);}public function getList(array $v5a2576254d428ddc22a03fac145c8749) {$v10ae9fc7d453b0dd525d0edf2ede7961 = $this->getCollection()    ->getObjectList($v5a2576254d428ddc22a03fac145c8749);foreach ($v10ae9fc7d453b0dd525d0edf2ede7961 as $va8cfde6331bd59eb2ac96f8911c4b666) {$this->initObject($va8cfde6331bd59eb2ac96f8911c4b666);}return $v10ae9fc7d453b0dd525d0edf2ede7961;}public function create($vb068931cc450442b63f5b3d276ea4297, $v5f694956811487225d15e973ca38fbab = null) {$v1baf71e726cd55b0e81186da45890c9e = $this->getTypeFacade();$v5f694956811487225d15e973ca38fbab = $v5f694956811487225d15e973ca38fbab ?: $v1baf71e726cd55b0e81186da45890c9e->getRootType()->getId();$this->validateType($v5f694956811487225d15e973ca38fbab);$vdb6d9b451b818ccc9a449383f2f0c450 = $this->getCollection();$vb80bb7740288fda1f201890375a60c8f = $vdb6d9b451b818ccc9a449383f2f0c450->addObject($vb068931cc450442b63f5b3d276ea4297, $v5f694956811487225d15e973ca38fbab);$va8cfde6331bd59eb2ac96f8911c4b666 = $vdb6d9b451b818ccc9a449383f2f0c450->getById($vb80bb7740288fda1f201890375a60c8f);if (!$va8cfde6331bd59eb2ac96f8911c4b666 instanceof iObject) {throw new \ErrorException('Cannot create trade offer data object');}return $this->setObjectGuid($va8cfde6331bd59eb2ac96f8911c4b666)    ->setSavingInDestructor(false);}public function createByOffer(iOffer $vd60db28d94d538bbb249dcc7f2273ab1) {return $this->create($vd60db28d94d538bbb249dcc7f2273ab1->getName(), $vd60db28d94d538bbb249dcc7f2273ab1->getTypeId());}public function save(iObject $va8cfde6331bd59eb2ac96f8911c4b666) {$this->validateType($va8cfde6331bd59eb2ac96f8911c4b666->getTypeId());$va8cfde6331bd59eb2ac96f8911c4b666->commit();return $this;}public function delete($vb80bb7740288fda1f201890375a60c8f) {$vdb6d9b451b818ccc9a449383f2f0c450 = $this->getCollection();$va8cfde6331bd59eb2ac96f8911c4b666 = $vdb6d9b451b818ccc9a449383f2f0c450->getById($vb80bb7740288fda1f201890375a60c8f);if (!$va8cfde6331bd59eb2ac96f8911c4b666 instanceof iObject) {return $this;}$this->validateType($va8cfde6331bd59eb2ac96f8911c4b666->getTypeId());$vdb6d9b451b818ccc9a449383f2f0c450->delObject($vb80bb7740288fda1f201890375a60c8f);return $this;}public function copy(iObject $v36cd38f49b9afa08222c0dc9ebfe35eb) {$this->validateType($v36cd38f49b9afa08222c0dc9ebfe35eb->getTypeId());$vb15d7cc6038948c5f9aae452c262d0cb = $this->getCollection()    ->cloneObject($v36cd38f49b9afa08222c0dc9ebfe35eb->getId());$v12cba3ee81cf4a793796a51b6327c678 = $this->get($vb15d7cc6038948c5f9aae452c262d0cb);if (!$v12cba3ee81cf4a793796a51b6327c678 instanceof iObject) {throw new \ErrorException('Cannot copy trade offer data object');}return $this->setObjectGuid($v12cba3ee81cf4a793796a51b6327c678);}private function setObjectGuid(iObject $va8cfde6331bd59eb2ac96f8911c4b666) {$va8cfde6331bd59eb2ac96f8911c4b666->setGUID(sprintf('trade_offer_data_object_%d', $va8cfde6331bd59eb2ac96f8911c4b666->getId()));$va8cfde6331bd59eb2ac96f8911c4b666->commit();return $va8cfde6331bd59eb2ac96f8911c4b666;}private function validateType($vb80bb7740288fda1f201890375a60c8f) {if (!$this->getTypeFacade()->isValid($vb80bb7740288fda1f201890375a60c8f)) {$v78e731027d8fd50ed642340b7c9a63b3 = sprintf('Invalid trade offer data object type (%s) given', $vb80bb7740288fda1f201890375a60c8f);throw new \ErrorException($v78e731027d8fd50ed642340b7c9a63b3);}}private function initObject(iObject $va8cfde6331bd59eb2ac96f8911c4b666) {$this->validateType($va8cfde6331bd59eb2ac96f8911c4b666->getTypeId());return $va8cfde6331bd59eb2ac96f8911c4b666->setSavingInDestructor(false);}private function setCollection(iCollection $vdb6d9b451b818ccc9a449383f2f0c450) {$this->collection = $vdb6d9b451b818ccc9a449383f2f0c450;return $this;}private function getCollection() {return $this->collection;}private function setTypeFacade(iTypeFacade $v1baf71e726cd55b0e81186da45890c9e) {$this->typeFacade = $v1baf71e726cd55b0e81186da45890c9e;return $this;}private function getTypeFacade() {return $this->typeFacade;}}