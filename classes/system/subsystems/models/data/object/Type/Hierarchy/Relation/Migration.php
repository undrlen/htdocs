<?php
 namespace UmiCms\System\Data\Object\Type\Hierarchy\Relation;class Migration implements iMigration {private $connection;private $repository;public function __construct(\IConnection $v4717d53ebfdfea8477f780ec66151dcb, iRepository $vb3f2035551f6e48c67489ace9f588f94) {$this->connection = $v4717d53ebfdfea8477f780ec66151dcb;$this->repository = $vb3f2035551f6e48c67489ace9f588f94;}public function migrate($v5f694956811487225d15e973ca38fbab) {$va951c4e53c6084439a713c266a10339e = $this->getAncestorList($v5f694956811487225d15e973ca38fbab);$vb3f2035551f6e48c67489ace9f588f94 = $this->getRepository();$vc9e9a848920877e76685b2e4e76de38d = count($va951c4e53c6084439a713c266a10339e);foreach ($va951c4e53c6084439a713c266a10339e as $v0b6849d57acb5403d1e63cce49f86ed5) {$vb3f2035551f6e48c67489ace9f588f94->create($v0b6849d57acb5403d1e63cce49f86ed5, $v5f694956811487225d15e973ca38fbab, $vc9e9a848920877e76685b2e4e76de38d);}return $this;}private function getAncestorList($v5f694956811487225d15e973ca38fbab) {$v8a12496d5582f8768d9e213417b18781 = (int) $v5f694956811487225d15e973ca38fbab;$v4717d53ebfdfea8477f780ec66151dcb = $this->getConnection();$vd33f9504baca2d4e88a291cff6f085f0 = [];while (true) {$v8a12496d5582f8768d9e213417b18781 = ($v8a12496d5582f8768d9e213417b18781 === 0) ? 'NULL' : $v8a12496d5582f8768d9e213417b18781;$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT `parent_id` FROM `cms3_object_types` WHERE `id` = $v8a12496d5582f8768d9e213417b18781";$result = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);if ($result->length() === 0) {break;}$vf1965a857bc285d26fe22023aa5ab50d = $result->fetch();$v8a12496d5582f8768d9e213417b18781 = (int) $vf1965a857bc285d26fe22023aa5ab50d['parent_id'];$v2f4663644f57999080e701c4f4a3cdff = in_array($v8a12496d5582f8768d9e213417b18781, $vd33f9504baca2d4e88a291cff6f085f0);if ($v2f4663644f57999080e701c4f4a3cdff) {break;}$vd33f9504baca2d4e88a291cff6f085f0[] = $v8a12496d5582f8768d9e213417b18781;}return array_reverse($vd33f9504baca2d4e88a291cff6f085f0);}private function getConnection() {return $this->connection;}private function getRepository() {return $this->repository;}}