<?php
 namespace UmiCms\System\Data\Object\Property\Value\ImgFile;use UmiCms\System\Data\Object\Property\Value\iMigration;use UmiCms\System\Data\Object\Property\Value\Migration as AbstractMigration;class Migration extends AbstractMigration implements iMigration {public function migrate(\iUmiObjectProperty $v1a8db4c996d8ed8289da5f957879ab94, $v99ac724d387523f1349bf0bdeef6eb44) {return $this->moveValues($v1a8db4c996d8ed8289da5f957879ab94, $v99ac724d387523f1349bf0bdeef6eb44, $v1a8db4c996d8ed8289da5f957879ab94->getDataType());}public function rollback(\iUmiObjectProperty $v1a8db4c996d8ed8289da5f957879ab94, $v99ac724d387523f1349bf0bdeef6eb44) {return $this->moveValues($v1a8db4c996d8ed8289da5f957879ab94, $v1a8db4c996d8ed8289da5f957879ab94->getDataType(), $v99ac724d387523f1349bf0bdeef6eb44);}protected function moveValues(\iUmiObjectProperty $v1a8db4c996d8ed8289da5f957879ab94, $vc78df1026a28909113fcc1b186b06635, $vba54548af18809208473a13abffc7d78) {$v4717d53ebfdfea8477f780ec66151dcb = $this->getConnection();$v1ddcb92ade31c8fbd370001f9b29a7d9 = 'Migrate property value "%s" from "%s" to "%s"';$v78e731027d8fd50ed642340b7c9a63b3 = sprintf($v1ddcb92ade31c8fbd370001f9b29a7d9, $v1a8db4c996d8ed8289da5f957879ab94->getName(), $vc78df1026a28909113fcc1b186b06635, $vba54548af18809208473a13abffc7d78);$v4717d53ebfdfea8477f780ec66151dcb->startTransaction($v78e731027d8fd50ed642340b7c9a63b3);try {$vc9550d5fad73447fc24ba47f95d1c6b7 = $this->getSchema();$v9fad4eca98916983345091d977e85ec5 = $vc9550d5fad73447fc24ba47f95d1c6b7->getImagesTable();$v4ebc27e9a8db8aa688796e687f4909a9 = $vc9550d5fad73447fc24ba47f95d1c6b7->getDefaultTable();$v3dff5790af2c99b97b4b297f2f9d3bba = $this->getColumnByDataType($vc78df1026a28909113fcc1b186b06635);$v2c09040764eb08bb79cd85132469c697 = $this->getColumnByDataType($vba54548af18809208473a13abffc7d78);$va3ea25e2c9b7f4638e04e3495ec2aa7b = ($v3dff5790af2c99b97b4b297f2f9d3bba === 'text_val') ? $v4ebc27e9a8db8aa688796e687f4909a9 : $v9fad4eca98916983345091d977e85ec5;$v5ca4a04647f4f60bb3e88f2fe4bce1b3 = ($va3ea25e2c9b7f4638e04e3495ec2aa7b === $v9fad4eca98916983345091d977e85ec5) ? $v4ebc27e9a8db8aa688796e687f4909a9 : $v9fad4eca98916983345091d977e85ec5;$this->moveRowsToTarget($v1a8db4c996d8ed8289da5f957879ab94, $va3ea25e2c9b7f4638e04e3495ec2aa7b, $v3dff5790af2c99b97b4b297f2f9d3bba, $v5ca4a04647f4f60bb3e88f2fe4bce1b3, $v2c09040764eb08bb79cd85132469c697);$this->deleteSourceRows($v1a8db4c996d8ed8289da5f957879ab94, $va3ea25e2c9b7f4638e04e3495ec2aa7b);}catch (\databaseException $v42552b1f133f9f8eb406d4f306ea9fd1) {$v4717d53ebfdfea8477f780ec66151dcb->rollbackTransaction();throw $v42552b1f133f9f8eb406d4f306ea9fd1;}$v4717d53ebfdfea8477f780ec66151dcb->commitTransaction();return $this;}}