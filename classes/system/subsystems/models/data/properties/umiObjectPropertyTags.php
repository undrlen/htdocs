<?php
 class umiObjectPropertyTags extends umiObjectProperty {protected function loadValue() {$v9b207167e5381c47682c6b4f58a623fb = [];$v945100186b119048837b9859c2c46410 = $this->field_id;$v8d777f385d3dfec8815d20f7496026dc = $this->getPropData();if ($v8d777f385d3dfec8815d20f7496026dc) {foreach ($v8d777f385d3dfec8815d20f7496026dc['varchar_val'] as $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {if ($v3a6d0284e743dc4a9b86f97d6dd1a3bf === null) {continue;}$v9b207167e5381c47682c6b4f58a623fb[] = (string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}$v4717d53ebfdfea8477f780ec66151dcb = $this->getConnection();$v80071f37861c360a27b7327e132c911a = $this->getTableName();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT varchar_val FROM {$v80071f37861c360a27b7327e132c911a} WHERE obj_id = '{$this->object_id}' AND field_id = '{$v945100186b119048837b9859c2c46410}'";$result = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$result->setFetchType(IQueryResult::FETCH_ROW);foreach ($result as $vf1965a857bc285d26fe22023aa5ab50d) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = array_shift($vf1965a857bc285d26fe22023aa5ab50d);if ($v3a6d0284e743dc4a9b86f97d6dd1a3bf === null) {continue;}$v9b207167e5381c47682c6b4f58a623fb[] = (string) $v3a6d0284e743dc4a9b86f97d6dd1a3bf;}return $v9b207167e5381c47682c6b4f58a623fb;}protected function saveValue() {$this->deleteCurrentRows();if (umiCount($this->value) == 1) {$v2063c1608d6e0baf80249c42e2be5804 = trim($this->value[0], ',');$v2063c1608d6e0baf80249c42e2be5804 = preg_replace("/[^A-Za-z0-9А-Яа-яЁё'\-$%_,\s]/u", '', $v2063c1608d6e0baf80249c42e2be5804);$v993fcb1e163e40a45771f626d3ea0f0f = explode(',', $v2063c1608d6e0baf80249c42e2be5804);}else {$v993fcb1e163e40a45771f626d3ea0f0f = array_map(     function ($vf4c9385f1902f7334b00b9b4ecd164de) {return preg_replace("/[^A-Za-z0-9А-Яа-яЁё'\\-\\$%_,\s]?/u", '', $vf4c9385f1902f7334b00b9b4ecd164de);},     $this->value    );}$v88e3c6692fb2cefd436f03a9fe331a66 = array_map(function($v2063c1608d6e0baf80249c42e2be5804) {return trim($v2063c1608d6e0baf80249c42e2be5804);}, $v993fcb1e163e40a45771f626d3ea0f0f);$vef019cabbf54484ac8984054c6fe670b = array_filter($v88e3c6692fb2cefd436f03a9fe331a66, function ($v13f055fdc29cde00f77f4ff0bcb09d49) {return ($v13f055fdc29cde00f77f4ff0bcb09d49 !== '');});$vef019cabbf54484ac8984054c6fe670b = array_unique($vef019cabbf54484ac8984054c6fe670b);if (isEmptyArray($vef019cabbf54484ac8984054c6fe670b)) {return;}$v80071f37861c360a27b7327e132c911a = $this->getTableName();$v1b1cc7f086b3f074da452bc3129981eb = <<<SQL
INSERT INTO `$v80071f37861c360a27b7327e132c911a` (`obj_id`, `field_id`, `varchar_val`) VALUES
SQL;   $v16b2b26000987faccb260b9d39df1269 = (int) $this->getObjectId();$v945100186b119048837b9859c2c46410 = (int) $this->getFieldId();foreach ($vef019cabbf54484ac8984054c6fe670b as $v331042c17673e19c71d18ad399d6957a) {$v331042c17673e19c71d18ad399d6957a = self::filterInputString($v331042c17673e19c71d18ad399d6957a);$v1b1cc7f086b3f074da452bc3129981eb .= sprintf("(%d, %d, '%s'),", $v16b2b26000987faccb260b9d39df1269, $v945100186b119048837b9859c2c46410, $v331042c17673e19c71d18ad399d6957a);}$v1b1cc7f086b3f074da452bc3129981eb = rtrim($v1b1cc7f086b3f074da452bc3129981eb, ',') . ';';$this->getConnection()->query($v1b1cc7f086b3f074da452bc3129981eb);}protected function isNeedToSave(array $v7f7cfde5ec586119b48911a2c75851e5) {$v0382b9fd9ef50b6a335f35e0aaaebf99 = $this->value;$v0382b9fd9ef50b6a335f35e0aaaebf99 = array_unique($v0382b9fd9ef50b6a335f35e0aaaebf99);$v7f7cfde5ec586119b48911a2c75851e5 = array_filter(    $v7f7cfde5ec586119b48911a2c75851e5,    function ($v2063c1608d6e0baf80249c42e2be5804) {$v2063c1608d6e0baf80249c42e2be5804 = (string) $v2063c1608d6e0baf80249c42e2be5804;return !empty($v2063c1608d6e0baf80249c42e2be5804);});$v7f7cfde5ec586119b48911a2c75851e5 = array_unique($v7f7cfde5ec586119b48911a2c75851e5);switch (true) {case empty($v0382b9fd9ef50b6a335f35e0aaaebf99) && empty($v7f7cfde5ec586119b48911a2c75851e5) : {return false;}case empty($v0382b9fd9ef50b6a335f35e0aaaebf99) && !empty($v7f7cfde5ec586119b48911a2c75851e5) : {return true;}case !empty($v0382b9fd9ef50b6a335f35e0aaaebf99) && empty($v7f7cfde5ec586119b48911a2c75851e5) : {return true;}case count($v0382b9fd9ef50b6a335f35e0aaaebf99) !== count($v7f7cfde5ec586119b48911a2c75851e5) : {return true;}default : {$vfa75cd270e3fdc6902126ada93e6e5d4 = [];foreach ($v0382b9fd9ef50b6a335f35e0aaaebf99 as $v37498e8f4fc0aae03cd0413f3fa77406) {$vfa75cd270e3fdc6902126ada93e6e5d4[] = (string) $v37498e8f4fc0aae03cd0413f3fa77406;}foreach ($v7f7cfde5ec586119b48911a2c75851e5 as $v75903fd2815e70b25d9b9d511f806f2b) {$v3507c374013c56cdce1c07386360c1b8 = (string) $v75903fd2815e70b25d9b9d511f806f2b;if (!in_array($v3507c374013c56cdce1c07386360c1b8, $vfa75cd270e3fdc6902126ada93e6e5d4)) {return true;}}return false;}}}}