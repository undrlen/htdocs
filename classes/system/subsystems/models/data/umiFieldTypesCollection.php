<?php
 class umiFieldTypesCollection extends singleton implements iSingleton, iUmiFieldTypesCollection {private $field_types = [];protected function __construct() {$this->loadFieldTypes();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = null) {return parent::getInstance(__CLASS__);}public function addFieldType($vb068931cc450442b63f5b3d276ea4297, $v870b60148237c1452dfb337fdd19c314 = 'string', $v09ec737a9ab66d1d796304239d3f8a86 = false, $va4e397efa082dcccc62563f1f2d9513b = false) {if (!umiFieldType::isValidDataType($v870b60148237c1452dfb337fdd19c314)) {throw new coreException('Not valid data type given');}$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_field_types (data_type) VALUES('{$v870b60148237c1452dfb337fdd19c314}')";$v4717d53ebfdfea8477f780ec66151dcb->query($vac5c74b64b4b8352ef2f181affb5ac2a);$ve2aeb4e882d60b1eb4b7c8cd97986a28 = $v4717d53ebfdfea8477f780ec66151dcb->insertId();$v833750ac635fcc57dc33ecafe365f9a7 = new umiFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);$v833750ac635fcc57dc33ecafe365f9a7->setName($vb068931cc450442b63f5b3d276ea4297);$v833750ac635fcc57dc33ecafe365f9a7->setDataType($v870b60148237c1452dfb337fdd19c314);$v833750ac635fcc57dc33ecafe365f9a7->setIsMultiple($v09ec737a9ab66d1d796304239d3f8a86);$v833750ac635fcc57dc33ecafe365f9a7->setIsUnsigned($va4e397efa082dcccc62563f1f2d9513b);$v833750ac635fcc57dc33ecafe365f9a7->commit();$this->field_types[$ve2aeb4e882d60b1eb4b7c8cd97986a28] = $v833750ac635fcc57dc33ecafe365f9a7;return $ve2aeb4e882d60b1eb4b7c8cd97986a28;}public function delFieldType($vb80bb7740288fda1f201890375a60c8f) {if (!$this->isExists($vb80bb7740288fda1f201890375a60c8f)) {return false;}$vb80bb7740288fda1f201890375a60c8f = (int) $vb80bb7740288fda1f201890375a60c8f;$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_object_field_types WHERE id = '{$vb80bb7740288fda1f201890375a60c8f}'";$v4717d53ebfdfea8477f780ec66151dcb->query($vac5c74b64b4b8352ef2f181affb5ac2a);unset($this->field_types[$vb80bb7740288fda1f201890375a60c8f]);return true;}public function getFieldType($vb80bb7740288fda1f201890375a60c8f) {if ($this->isExists($vb80bb7740288fda1f201890375a60c8f)) {return $this->field_types[$vb80bb7740288fda1f201890375a60c8f];}return false;}public function getFieldTypeByDataType($v870b60148237c1452dfb337fdd19c314, $v09ec737a9ab66d1d796304239d3f8a86 = false) {$v870b60148237c1452dfb337fdd19c314 = (string) $v870b60148237c1452dfb337fdd19c314;if ($v870b60148237c1452dfb337fdd19c314 === '') {return false;}$v69552af3a03df9391f70eb1851f817c5 = $this->getFieldTypesList();$v833750ac635fcc57dc33ecafe365f9a7 = false;foreach ($v69552af3a03df9391f70eb1851f817c5 as $v39bb421562d6f6128a957f3d162538d2) {if ($v39bb421562d6f6128a957f3d162538d2->getDataType() == $v870b60148237c1452dfb337fdd19c314 && $v39bb421562d6f6128a957f3d162538d2->getIsMultiple() == $v09ec737a9ab66d1d796304239d3f8a86) {$v833750ac635fcc57dc33ecafe365f9a7 = $v39bb421562d6f6128a957f3d162538d2;break;}}return $v833750ac635fcc57dc33ecafe365f9a7;}public function isExists($vb80bb7740288fda1f201890375a60c8f) {return array_key_exists($vb80bb7740288fda1f201890375a60c8f, $this->field_types);}private function loadFieldTypes() {$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = 'SELECT id, name, data_type, is_multiple, is_unsigned FROM cms3_object_field_types ORDER BY name ASC';$result = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$result->setFetchType(IQueryResult::FETCH_ROW);foreach ($result as $vf1965a857bc285d26fe22023aa5ab50d) {$ve2aeb4e882d60b1eb4b7c8cd97986a28 = $vf1965a857bc285d26fe22023aa5ab50d[0];try {$v833750ac635fcc57dc33ecafe365f9a7 = new umiFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {$ve1671797c52e15f763380b45e841ec32->unregister();continue;}$this->field_types[$ve2aeb4e882d60b1eb4b7c8cd97986a28] = $v833750ac635fcc57dc33ecafe365f9a7;}return true;}public function getFieldTypesList() {if (!is_array($this->field_types) || umiCount($this->field_types) == 0) {$this->loadFieldTypes();}return $this->field_types;}public function clearCache() {$v14f802e1fba977727845e8872c1743a7 = array_keys($this->field_types);foreach ($v14f802e1fba977727845e8872c1743a7 as $v3c6e0b8a9c15224a8228b9a98ca1531d) {unset($this->field_types[$v3c6e0b8a9c15224a8228b9a98ca1531d]);}$this->field_types = [];$this->loadFieldTypes();}}