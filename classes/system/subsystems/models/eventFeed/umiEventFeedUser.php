<?php
 class umiEventFeedUser {private static $connection;private static $users = [];private $id;private $lastCheckIn;private $settings;private $isModified = false;public static function setConnection(IConnection $v4717d53ebfdfea8477f780ec66151dcb) {self::$connection = $v4717d53ebfdfea8477f780ec66151dcb;}public static function getConnection() {if (self::$connection === null) {throw new Exception('No database connection is set');}return self::$connection;}public static function create($vb80bb7740288fda1f201890375a60c8f) {$vb80bb7740288fda1f201890375a60c8f = (int) $vb80bb7740288fda1f201890375a60c8f;$v07cc694b9b3fc636710fa08b6922c42b = time();$v2e5d8aa3dfa8ef34ca5131d20f9dad51 = serialize([]);self::getConnection()->queryResult(    "INSERT INTO umi_event_users (id, last_check_in, settings) VALUES('{$vb80bb7740288fda1f201890375a60c8f}', '{$v07cc694b9b3fc636710fa08b6922c42b}', '{$v2e5d8aa3dfa8ef34ca5131d20f9dad51}')"   );$vee11cbb19052e40b07aac0ca060c23ee = new self($vb80bb7740288fda1f201890375a60c8f);self::$users[$vb80bb7740288fda1f201890375a60c8f] = $vee11cbb19052e40b07aac0ca060c23ee;return $vee11cbb19052e40b07aac0ca060c23ee;}public static function get($vb80bb7740288fda1f201890375a60c8f) {$vb80bb7740288fda1f201890375a60c8f = (int) $vb80bb7740288fda1f201890375a60c8f;if (isset(self::$users[$vb80bb7740288fda1f201890375a60c8f])) {return self::$users[$vb80bb7740288fda1f201890375a60c8f];}$vee11cbb19052e40b07aac0ca060c23ee = new self($vb80bb7740288fda1f201890375a60c8f);self::$users[$vb80bb7740288fda1f201890375a60c8f] = $vee11cbb19052e40b07aac0ca060c23ee;return $vee11cbb19052e40b07aac0ca060c23ee;}public function __construct($vb80bb7740288fda1f201890375a60c8f) {$vb80bb7740288fda1f201890375a60c8f = (int) $vb80bb7740288fda1f201890375a60c8f;$this->id = $vb80bb7740288fda1f201890375a60c8f;$this->load();}public function getId() {return $this->id;}public function getLastCheckIn() {return $this->lastCheckIn;}public function getSettings() {return $this->settings;}public function getModified() {return $this->isModified;}public function setModified($vdeadf2d2b629ab4064615aad7569afa2 = true) {$this->isModified = $vdeadf2d2b629ab4064615aad7569afa2;}public function setLastCheckIn() {$this->setModified();$this->lastCheckIn = time();}public function setSettings(array $v2e5d8aa3dfa8ef34ca5131d20f9dad51) {$this->setModified();$this->settings = $v2e5d8aa3dfa8ef34ca5131d20f9dad51;}protected function load() {$vb80bb7740288fda1f201890375a60c8f = (int) $this->id;$v49f290d6e8459c53f31f97de37921086 = self::getConnection()    ->queryResult("SELECT last_check_in, settings FROM umi_event_users WHERE id = {$vb80bb7740288fda1f201890375a60c8f}");if (!$v49f290d6e8459c53f31f97de37921086 || !$v49f290d6e8459c53f31f97de37921086->length()) {throw new privateException("Failed to load info for umiEventFeedUser with id {$vb80bb7740288fda1f201890375a60c8f}");}foreach ($v49f290d6e8459c53f31f97de37921086 as $vcaf9b6b99962bf5c2264824231d7a40c) {$this->lastCheckIn = $vcaf9b6b99962bf5c2264824231d7a40c['last_check_in'];$this->settings = unserialize($vcaf9b6b99962bf5c2264824231d7a40c['settings']);}}public function save() {if (!$this->isModified) {return false;}$vb80bb7740288fda1f201890375a60c8f = (int) $this->id;$vf8fb24918647d59a826ce9704b2ad5c2 = $this->lastCheckIn ?: time();$v2e5d8aa3dfa8ef34ca5131d20f9dad51 = serialize($this->settings);self::getConnection()->query(    "UPDATE umi_event_users SET last_check_in = '{$vf8fb24918647d59a826ce9704b2ad5c2}', settings = '{$v2e5d8aa3dfa8ef34ca5131d20f9dad51}' WHERE id = {$vb80bb7740288fda1f201890375a60c8f}"   );}}