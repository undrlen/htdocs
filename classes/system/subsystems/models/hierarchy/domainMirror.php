<?php
 use UmiCms\Service;class domainMirror extends umiEntinty implements iDomainMirror {private $host;private $domainId;protected $store_type = 'domain_mirror';public function getHost($v97a57645a3f0e1518f8c9f4d340d4c4f = false) {if ($v97a57645a3f0e1518f8c9f4d340d4c4f) {return Service::IdnConverter()     ->encode($this->host);}return $this->host;}public function setHost($v67b3dba8bc6778101892eb77249db32e) {if (!is_string($v67b3dba8bc6778101892eb77249db32e) || empty($v67b3dba8bc6778101892eb77249db32e)) {throw new wrongParamException('Wrong domain mirror host given');}$v67b3dba8bc6778101892eb77249db32e = domain::filterHostName($v67b3dba8bc6778101892eb77249db32e);if ($this->getHost() != $v67b3dba8bc6778101892eb77249db32e) {$this->host = $v67b3dba8bc6778101892eb77249db32e;$this->setIsUpdated();}}public function getDomainId() {return $this->domainId;}public function setDomainId($vb80bb7740288fda1f201890375a60c8f) {if (!Service::DomainCollection()->isExists($vb80bb7740288fda1f201890375a60c8f)) {throw new coreException("Domain #{$vb80bb7740288fda1f201890375a60c8f} doesn't exist");}if ($this->getDomainId() != $vb80bb7740288fda1f201890375a60c8f) {$this->domainId = $vb80bb7740288fda1f201890375a60c8f;$this->setIsUpdated();}return true;}protected function loadInfo($vf1965a857bc285d26fe22023aa5ab50d = false) {if (!is_array($vf1965a857bc285d26fe22023aa5ab50d) || count($vf1965a857bc285d26fe22023aa5ab50d) < 3) {$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$v817f7de13f58df29b13a9570082097da = (int) $this->getId();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT `id`, `host`, `rel` FROM `cms3_domain_mirrows` WHERE `id` = $v817f7de13f58df29b13a9570082097da LIMIT 0,1";$result = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$result->setFetchType(IQueryResult::FETCH_ROW);$vf1965a857bc285d26fe22023aa5ab50d = $result->fetch();}if (!is_array($vf1965a857bc285d26fe22023aa5ab50d) || count($vf1965a857bc285d26fe22023aa5ab50d) < 3) {return false;}list($vb80bb7740288fda1f201890375a60c8f, $v67b3dba8bc6778101892eb77249db32e, $v7ffc4d510260a8544e5550e62ec56bc1) = $vf1965a857bc285d26fe22023aa5ab50d;$this->host = (string) $v67b3dba8bc6778101892eb77249db32e;$this->domainId = (int) $v7ffc4d510260a8544e5550e62ec56bc1;return true;}protected function save() {$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$v67b3dba8bc6778101892eb77249db32e = $v4717d53ebfdfea8477f780ec66151dcb->escape($this->getHost());$v817f7de13f58df29b13a9570082097da = (int) $this->getId();$v72ee76c5c29383b7c9f9225c1fa4d10b = (int) $this->getDomainId();$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
UPDATE `cms3_domain_mirrows`
	SET `host` = '$v67b3dba8bc6778101892eb77249db32e', `rel` = $v72ee76c5c29383b7c9f9225c1fa4d10b
		WHERE `id` = $v817f7de13f58df29b13a9570082097da
SQL;   $v4717d53ebfdfea8477f780ec66151dcb->query($vac5c74b64b4b8352ef2f181affb5ac2a);return true;}}