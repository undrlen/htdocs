<?php
 use UmiCms\Service;abstract class selectorWhereProp {protected $value;protected $mode;protected $searchInRelatedObject = true;protected $modes = [   'equals',   'notequals',   'ilike',   'like',   'more',   'eqmore',   'less',   'eqless',   'between',   'isnull',   'isnotnull'  ];public function __call($vea9f6aca279138c58f705c8d4cb4b8ce, $args) {$vea9f6aca279138c58f705c8d4cb4b8ce = mb_strtolower($vea9f6aca279138c58f705c8d4cb4b8ce);if (!in_array($vea9f6aca279138c58f705c8d4cb4b8ce, $this->modes)) {throw new selectorException("This property doesn't support \"{$vea9f6aca279138c58f705c8d4cb4b8ce}\" method");}$v2063c1608d6e0baf80249c42e2be5804 = umiCount($args) ? $args[0] : null;if ($v2063c1608d6e0baf80249c42e2be5804 instanceof iUmiEntinty) {$v2063c1608d6e0baf80249c42e2be5804 = $v2063c1608d6e0baf80249c42e2be5804->getId();}if (isset($this->fieldIdList)) {$ve491e7c03c219d563fe5073ad035bb25 = $this->getFieldIdList();$v945100186b119048837b9859c2c46410 = array_shift($ve491e7c03c219d563fe5073ad035bb25);$v06e3d36fa30cea095545139854ad1fb9 = selector::get('field')->id($v945100186b119048837b9859c2c46410);$v6b1a57fa235477758817df3c91158006 = $v06e3d36fa30cea095545139854ad1fb9->getRestrictionId();if ($v6b1a57fa235477758817df3c91158006) {$v3dadfaeb46ec74762b37de11fea7605c = baseRestriction::get($v6b1a57fa235477758817df3c91158006);if ($v3dadfaeb46ec74762b37de11fea7605c instanceof iNormalizeInRestriction) {$v2063c1608d6e0baf80249c42e2be5804 = $v3dadfaeb46ec74762b37de11fea7605c->normalizeIn($v2063c1608d6e0baf80249c42e2be5804);}}$v3a689fd989c8726c66cad73bdb0ee1b6 = is_string($v2063c1608d6e0baf80249c42e2be5804);$v7b5b883a2fd867a0a20ae1d7a0dcc9f5 = $this->searchInRelatedObject;if ($v06e3d36fa30cea095545139854ad1fb9->getDataType() === 'relation' && $v3a689fd989c8726c66cad73bdb0ee1b6 && $v7b5b883a2fd867a0a20ae1d7a0dcc9f5 && $v06e3d36fa30cea095545139854ad1fb9->getGuideId()) {$v52eb29c6d8ea0d3a5bb3654f49bbd7c7 = $v06e3d36fa30cea095545139854ad1fb9->getGuideId();$vbe8f80182e0c983916da7338c2c1c040 = selector::get('object')->id($v2063c1608d6e0baf80249c42e2be5804);$v8be74552df93e31bbdd6b36ed74bdb6a = new selector('objects');$v8be74552df93e31bbdd6b36ed74bdb6a->types('object-type')->id($v52eb29c6d8ea0d3a5bb3654f49bbd7c7);$v703ba2e06faf1f078357efead52e64b6 = selector::get('object-type')      ->name('users', 'user');if ($v06e3d36fa30cea095545139854ad1fb9->getName() == 'customer_id' && $v06e3d36fa30cea095545139854ad1fb9->getGuideId() == $v703ba2e06faf1f078357efead52e64b6->getId()) {$v3f36e8e32eb814fd2d5262b453880987 = selector::get('object-type')       ->name('emarket', 'customer');$v8be74552df93e31bbdd6b36ed74bdb6a->types('object-type')->id($v3f36e8e32eb814fd2d5262b453880987->getId());}if (is_numeric($v2063c1608d6e0baf80249c42e2be5804) && $vbe8f80182e0c983916da7338c2c1c040 instanceof iUmiObject && ($vbe8f80182e0c983916da7338c2c1c040->getTypeId() == $v52eb29c6d8ea0d3a5bb3654f49bbd7c7)) {$v8be74552df93e31bbdd6b36ed74bdb6a->where('id')->equals($v2063c1608d6e0baf80249c42e2be5804);}else {$v8be74552df93e31bbdd6b36ed74bdb6a->where('*')->ilike($v2063c1608d6e0baf80249c42e2be5804);}if (umiCount($v8be74552df93e31bbdd6b36ed74bdb6a->result()) > 0) {$v2063c1608d6e0baf80249c42e2be5804 = $v8be74552df93e31bbdd6b36ed74bdb6a->result();}}if ($v06e3d36fa30cea095545139854ad1fb9->getDataType() === 'date' && $v3a689fd989c8726c66cad73bdb0ee1b6) {$v5fc732311905cb27e82d67f4f6511f7f = new umiDate;$v5fc732311905cb27e82d67f4f6511f7f->setDateByString(trim($v2063c1608d6e0baf80249c42e2be5804, ' %'));$v2063c1608d6e0baf80249c42e2be5804 = $v5fc732311905cb27e82d67f4f6511f7f->getDateTimeStamp();}}$this->value = $v2063c1608d6e0baf80249c42e2be5804;$this->mode = $vea9f6aca279138c58f705c8d4cb4b8ce;}public function between($vea2b2676c28c0db26d39331a336c6b92, $v7f021a1415b86f2d013b2618fb31ae53) {return $this->__call('between', [[$vea2b2676c28c0db26d39331a336c6b92, $v7f021a1415b86f2d013b2618fb31ae53]]);}public function __get($v23a5b8ab834cb5140fa6665622eb6417) {if (isset($this->$v23a5b8ab834cb5140fa6665622eb6417)) {return $this->$v23a5b8ab834cb5140fa6665622eb6417;}return null;}public function __set($vb068931cc450442b63f5b3d276ea4297, $v2063c1608d6e0baf80249c42e2be5804) {if (property_exists($this, $vb068931cc450442b63f5b3d276ea4297)) {$this->$vb068931cc450442b63f5b3d276ea4297 = $v2063c1608d6e0baf80249c42e2be5804;}return $this;}public function __isset($v23a5b8ab834cb5140fa6665622eb6417) {return property_exists(get_class($this), $v23a5b8ab834cb5140fa6665622eb6417);}}class selectorWhereSysProp extends selectorWhereProp {public $name;public function __construct($vb068931cc450442b63f5b3d276ea4297) {$this->name = $vb068931cc450442b63f5b3d276ea4297;}}class selectorWhereFieldProp extends selectorWhereProp {protected $fieldIdList;public function __construct(array $ve491e7c03c219d563fe5073ad035bb25, $v515069ae110af98a25207401f289953b = true) {$this->fieldIdList = $ve491e7c03c219d563fe5073ad035bb25;$this->searchInRelatedObject = is_array($v515069ae110af98a25207401f289953b) ? true : (bool) $v515069ae110af98a25207401f289953b;}public function getFieldIdList() {return $this->fieldIdList;}}class selectorWhereHierarchy {protected $elementId;protected $level;protected $selfLevel;public function page($v7552cd149af7495ee7d8225974e50f80) {$vb81ca7c0ccaa77e7aa91936ab0070695 = umiHierarchy::getInstance();if (!is_numeric($v7552cd149af7495ee7d8225974e50f80)) {$v7552cd149af7495ee7d8225974e50f80 = $vb81ca7c0ccaa77e7aa91936ab0070695->getIdByPath($v7552cd149af7495ee7d8225974e50f80);}if (!is_numeric($v7552cd149af7495ee7d8225974e50f80)) {throw new selectorException(__METHOD__ . ': elementId expected to be numeric');}$this->elementId = (int) $v7552cd149af7495ee7d8225974e50f80;$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT level FROM cms3_hierarchy_relations WHERE child_id = {$this->elementId}";$result = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$result->setFetchType(IQueryResult::FETCH_ROW);$va8575cc89c630b6489ecac09848a6f5e = 0;if ($result->length() > 0) {$v54851b009c5c647ca3e77cc517b8c76c = $result->fetch();$va8575cc89c630b6489ecac09848a6f5e = (int) array_shift($v54851b009c5c647ca3e77cc517b8c76c);}$this->selfLevel = $va8575cc89c630b6489ecac09848a6f5e;$this->level = $va8575cc89c630b6489ecac09848a6f5e + 1;return $this;}public function level($vc9e9a848920877e76685b2e4e76de38d = 1) {if (!is_numeric($this->selfLevel)) {throw new selectorException(__METHOD__ . ': selfLevel expected to be numeric');}$this->level = ($vc9e9a848920877e76685b2e4e76de38d == 0) ? 0 : $this->selfLevel + (int) $vc9e9a848920877e76685b2e4e76de38d;}public function __get($v23a5b8ab834cb5140fa6665622eb6417) {return $this->$v23a5b8ab834cb5140fa6665622eb6417;}public function __isset($v23a5b8ab834cb5140fa6665622eb6417) {return property_exists(get_class($this), $v23a5b8ab834cb5140fa6665622eb6417);}public function childs($vc9e9a848920877e76685b2e4e76de38d = 1) {$this->level($vc9e9a848920877e76685b2e4e76de38d);}}class selectorWherePermissions {protected $level = 0x1, $owners = [], $isSv;public function __construct() {$permissions = permissionsCollection::getInstance();$vfa53b91ccc1b78668d5af58e1ed3a485 = Service::Auth();$v8e44f0089b076e18a718eb9ca3d94674 = $vfa53b91ccc1b78668d5af58e1ed3a485->getUserId();$this->isSv = $permissions->isSv();if (!$this->isSv) {$this->owners = [$v8e44f0089b076e18a718eb9ca3d94674];$vee11cbb19052e40b07aac0ca060c23ee = umiObjectsCollection::getInstance()->getObject($v8e44f0089b076e18a718eb9ca3d94674);if ($vee11cbb19052e40b07aac0ca060c23ee) {$this->owners = array_merge($this->owners, $vee11cbb19052e40b07aac0ca060c23ee->groups);}}}public function level($vc9e9a848920877e76685b2e4e76de38d) {$this->level = (int) $vc9e9a848920877e76685b2e4e76de38d;}public function owners($vb132392a317588e56460e77a8fd74229) {if (is_array($vb132392a317588e56460e77a8fd74229)) {foreach ($vb132392a317588e56460e77a8fd74229 as $v72122ce96bfec66e2396d2e25225d70a) {$this->owners($v72122ce96bfec66e2396d2e25225d70a);}}else {$this->addOwner($vb132392a317588e56460e77a8fd74229);}return $this;}public function __get($v23a5b8ab834cb5140fa6665622eb6417) {return $this->$v23a5b8ab834cb5140fa6665622eb6417;}public function __isset($v23a5b8ab834cb5140fa6665622eb6417) {return property_exists(get_class($this), $v23a5b8ab834cb5140fa6665622eb6417);}protected function addOwner($vb0ab4f7791b60b1e8ea01057b77873b0) {if (in_array($vb0ab4f7791b60b1e8ea01057b77873b0, $this->owners)) {return;}$permissions = permissionsCollection::getInstance();$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$va8cfde6331bd59eb2ac96f8911c4b666 = $v5891da2d64975cae48d175d1e001f5da->getObject($vb0ab4f7791b60b1e8ea01057b77873b0);if ($va8cfde6331bd59eb2ac96f8911c4b666 instanceof iUmiObject) {if ($permissions->isSv($vb0ab4f7791b60b1e8ea01057b77873b0)) {$this->isSv = true;return;}$this->owners[] = $vb0ab4f7791b60b1e8ea01057b77873b0;if ($va8cfde6331bd59eb2ac96f8911c4b666->groups) {$this->owners = array_merge($this->owners, $va8cfde6331bd59eb2ac96f8911c4b666->groups);}}}}