<?php
 namespace UmiCms\Classes\System\Utils\Api\Http\Json\Yandex\Client;use Guzzle\Http\Message\RequestInterface;use UmiCms\Classes\System\Utils\Api\Http\Exception;use UmiCms\Classes\System\Utils\Api\Http\Json\Client;class OAuth extends Client implements iOAuth {const SERVICE_HOST = 'https://oauth.yandex.ru';private $login;private $password;public function __construct() {$this->initHttpClient();}public function setAuth($vd56b699830e77ba53855679cb1d252da, $v5f4dcc3b5aa765d61d8327deb882cf99) {$this->login = $vd56b699830e77ba53855679cb1d252da;$this->password = $v5f4dcc3b5aa765d61d8327deb882cf99;return $this;}public function getTokenByUserCode($vc13367945d5d4c91047b3b50234aa7ab) {$v10573b873d2fa5a365d558a45e328e47 = $this->getHttpClient()->post(    $this->buildUrl(     ['token']    ),    $this->getDefaultHeaders(),    [     'grant_type' => 'authorization_code',     'code' => $vc13367945d5d4c91047b3b50234aa7ab,     'client_id' => $this->getLogin(),     'client_secret' => $this->getPassword()    ],    $this->getMuteExceptionOption()   );$vd1fc8eaf36937be0c3ba8cfe0a2c1bfe = $this->getResponse($v10573b873d2fa5a365d558a45e328e47);if (!isset($vd1fc8eaf36937be0c3ba8cfe0a2c1bfe['access_token'])) {throw new Exception\BadResponse('Yandex.OAuth client error', 1);}return $vd1fc8eaf36937be0c3ba8cfe0a2c1bfe['access_token'];}protected function getResponse(RequestInterface $v10573b873d2fa5a365d558a45e328e47) {$v841a2d689ad86bd1611447453c22c6fc = parent::getResponse($v10573b873d2fa5a365d558a45e328e47);if (isset($v841a2d689ad86bd1611447453c22c6fc['error'])) {throw new Exception\BadRequest($v841a2d689ad86bd1611447453c22c6fc['error'], 2);}return $v841a2d689ad86bd1611447453c22c6fc;}protected function getServiceUrl() {return self::SERVICE_HOST;}private function getLogin() {return $this->login;}private function getPassword() {return $this->password;}}