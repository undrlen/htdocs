<?php
 namespace UmiCms\Classes\System\Utils\Links\Grabber\Steps;class ObjectsNames extends Step implements \iUmiDataBaseInjector {use \tUmiDataBaseInjector;protected $offset;protected $limit;const STEP_NAME = 'ObjectsNames';const OFFSET_KEY = 'offset';const LIMIT_KEY = 'limit';const ITERATION_ITEMS_NUMBER_DEFAULT_LIMIT = 150;public function getName() {return self::STEP_NAME;}public function getStartStateStructure() {return [    self::OFFSET_KEY => 0,    self::LIMIT_KEY => self::ITERATION_ITEMS_NUMBER_DEFAULT_LIMIT,    self::COMPLETE_KEY => false,   ];}public function setState(array $v9ed39e2ea931586b6a985a6942ef573e) {if (!isset($v9ed39e2ea931586b6a985a6942ef573e[self::OFFSET_KEY])) {throw new \wrongParamException('Cant detect offset');}$v7a86c157ee9713c34fbd7a1ee40f0c5a = $v9ed39e2ea931586b6a985a6942ef573e[self::OFFSET_KEY];if (!isset($v9ed39e2ea931586b6a985a6942ef573e[self::LIMIT_KEY])) {throw new \wrongParamException('Cant detect limit');}$vaa9f73eea60a006820d0f8768bc8a3fc = $v9ed39e2ea931586b6a985a6942ef573e[self::LIMIT_KEY];if (!isset($v9ed39e2ea931586b6a985a6942ef573e[self::COMPLETE_KEY])) {throw new \wrongParamException('Cant detect complete status');}$vf94c28463eca606eda684e34af8244cf = $v9ed39e2ea931586b6a985a6942ef573e[self::COMPLETE_KEY];$this->setOffset($v7a86c157ee9713c34fbd7a1ee40f0c5a)    ->setLimit($vaa9f73eea60a006820d0f8768bc8a3fc)    ->setCompleteStatus($vf94c28463eca606eda684e34af8244cf);return $this;}public function grab() {if ($this->isComplete()) {return $this;}$vaa9f73eea60a006820d0f8768bc8a3fc = (int) $this->getLimit();$v7a86c157ee9713c34fbd7a1ee40f0c5a = (int) $this->getOffset();$v4717d53ebfdfea8477f780ec66151dcb = $this->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = <<<SQL
SELECT
	`id`,
	`name`
FROM
	`cms3_objects`
WHERE
	`name` IS NOT NULL
LIMIT
	$v7a86c157ee9713c34fbd7a1ee40f0c5a, $vaa9f73eea60a006820d0f8768bc8a3fc;
SQL;   $result = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$v17ee05ed62e1f17284e7a5843d5553d5 = [];if ($result->length() == 0) {$this->setResult($v17ee05ed62e1f17284e7a5843d5553d5)     ->setCompleteStatus(true);}foreach ($result as $vf1965a857bc285d26fe22023aa5ab50d) {$vb068931cc450442b63f5b3d276ea4297 = trim($vf1965a857bc285d26fe22023aa5ab50d['name']);$v45a82579528dcdc6535fdcb693a36170 = $this->parseUrlsFromString($vb068931cc450442b63f5b3d276ea4297);if (umiCount($v45a82579528dcdc6535fdcb693a36170) === 0) {continue;}$vb80bb7740288fda1f201890375a60c8f = $vf1965a857bc285d26fe22023aa5ab50d['id'];$v3e3756b25306c2f44e7fad597024e50c = $this->getObjectEditLinkByObjectId($vb80bb7740288fda1f201890375a60c8f);$v17ee05ed62e1f17284e7a5843d5553d5[$v3e3756b25306c2f44e7fad597024e50c] = $v45a82579528dcdc6535fdcb693a36170;}return $this->setResult($v17ee05ed62e1f17284e7a5843d5553d5)    ->setOffset($v7a86c157ee9713c34fbd7a1ee40f0c5a + $vaa9f73eea60a006820d0f8768bc8a3fc);}public function getState() {return [    self::OFFSET_KEY => (int) $this->getOffset(),    self::LIMIT_KEY => (int) $this->getLimit(),    self::COMPLETE_KEY => (bool) $this->isComplete(),   ];}protected function setOffset($v7a86c157ee9713c34fbd7a1ee40f0c5a) {if (!is_numeric($v7a86c157ee9713c34fbd7a1ee40f0c5a)) {throw new \wrongParamException('Wrong offset given');}$this->offset = (int) $v7a86c157ee9713c34fbd7a1ee40f0c5a;return $this;}protected function getOffset() {if ($this->offset === null) {throw new \RequiredPropertyHasNoValueException('You should set offset first');}return $this->offset;}protected function setLimit($vaa9f73eea60a006820d0f8768bc8a3fc) {if (!is_numeric($vaa9f73eea60a006820d0f8768bc8a3fc) || $vaa9f73eea60a006820d0f8768bc8a3fc === 0) {throw new \wrongParamException('Wrong limit given');}$this->limit = (int) $vaa9f73eea60a006820d0f8768bc8a3fc;return $this;}protected function getLimit() {if ($this->limit === null) {throw new \RequiredPropertyHasNoValueException('You should set limit first');}return $this->limit;}protected function getObjectEditLinkByObjectId($v16b2b26000987faccb260b9d39df1269) {return '/admin/data/guide_item_edit/' . $v16b2b26000987faccb260b9d39df1269 . '/';}}