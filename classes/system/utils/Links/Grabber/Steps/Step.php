<?php
 namespace UmiCms\Classes\System\Utils\Links\Grabber\Steps;abstract class Step implements iStep {protected $isComplete;protected $result;const HTML_LINK_PATTERN = '/<a(?!>).*?href\s{0,}=\s{0,}(".*?")/';const URL_HOST_PATTERN = '/^(([a-z0-9-_]+\.){1,}([a-z]+){1}[\/]{0,})$/';const COMPLETE_KEY = 'complete';const URL_HOST_KEY = 'host';const URL_PATH_KEY = 'path';abstract public function getName();abstract public function setState(array $v9ed39e2ea931586b6a985a6942ef573e);abstract public function grab();abstract public function getState();abstract public function getStartStateStructure();public function isComplete() {if ($this->isComplete === null) {throw new \RequiredPropertyHasNoValueException('You should set is complete status first');}return $this->isComplete;}public function getResult() {if ($this->result === null) {throw new \RequiredPropertyHasNoValueException('You should grab first');}return $this->result;}protected function setCompleteStatus($vf94c28463eca606eda684e34af8244cf) {if (!is_bool($vf94c28463eca606eda684e34af8244cf)) {throw new \wrongParamException('Wrong complete status given');}$this->isComplete = $vf94c28463eca606eda684e34af8244cf;return $this;}protected function setResult(array $result) {$this->result = $result;return $this;}protected function parseUrlsFromString($vb45cffe084dd3d20d928bee85e7b0f21) {if ($this->isLink($vb45cffe084dd3d20d928bee85e7b0f21)) {return [$vb45cffe084dd3d20d928bee85e7b0f21];}return $this->getLinksFromHtmlText($vb45cffe084dd3d20d928bee85e7b0f21);}protected function parseUrlsFromText($v1cb251ec0d568de6a929b520c4aed8d1) {$v7ede9e8e62d41501ae4384d3c178dbe3 = $this->getLinksFromHtmlText($v1cb251ec0d568de6a929b520c4aed8d1);if (umiCount($v7ede9e8e62d41501ae4384d3c178dbe3) > 0) {return $v7ede9e8e62d41501ae4384d3c178dbe3;}if ($this->isLink($v1cb251ec0d568de6a929b520c4aed8d1)) {return [$v1cb251ec0d568de6a929b520c4aed8d1];}return [];}protected function isLink($vb45cffe084dd3d20d928bee85e7b0f21) {$vc027fb43468eb96ca67e21f552d6ba80 = parse_url($vb45cffe084dd3d20d928bee85e7b0f21);if ($vc027fb43468eb96ca67e21f552d6ba80 === false) {return false;}$vf6238bc7d1da256b65b793b74d17bde8 = umiCount($vc027fb43468eb96ca67e21f552d6ba80);$vbe21ab564112ee4b12224fdea101acf5 = isset($vc027fb43468eb96ca67e21f552d6ba80[self::URL_HOST_KEY]);$v0415ac212d08d8b9e7a58997067014ed = isset($vc027fb43468eb96ca67e21f552d6ba80[self::URL_PATH_KEY]);if ($vf6238bc7d1da256b65b793b74d17bde8 > 0 && !($vbe21ab564112ee4b12224fdea101acf5 || $v0415ac212d08d8b9e7a58997067014ed)) {return true;}if ($vbe21ab564112ee4b12224fdea101acf5 && preg_match(self::URL_HOST_PATTERN, $vc027fb43468eb96ca67e21f552d6ba80[self::URL_HOST_KEY])) {return true;}if (preg_match(self::URL_HOST_PATTERN, $vb45cffe084dd3d20d928bee85e7b0f21)) {return true;}return false;}protected function getLinksFromHtmlText($vfc35fdc70d5fc69d269883a822c7a53e) {$v9c28d32df234037773be184dbdafc274 = [];preg_match_all(self::HTML_LINK_PATTERN, $vfc35fdc70d5fc69d269883a822c7a53e, $v9c28d32df234037773be184dbdafc274);if (!isset($v9c28d32df234037773be184dbdafc274[1]) || !is_array($v9c28d32df234037773be184dbdafc274[1]) || umiCount($v9c28d32df234037773be184dbdafc274[1]) == 0) {return [];}return array_map(    function ($v2a304a1348456ccd2234cd71a81bd338) {return trim($v2a304a1348456ccd2234cd71a81bd338, '"');},    $v9c28d32df234037773be184dbdafc274[1]   );}}