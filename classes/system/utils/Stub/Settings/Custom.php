<?php
 namespace UmiCms\Classes\System\Utils\Stub\Settings;use UmiCms\Service;class Custom extends Settings {protected $domainId;protected $langId;public function __construct($v72ee76c5c29383b7c9f9225c1fa4d10b, $vf585b7f018bb4ced15a03683a733e50b, \iRegedit $va9205dcfd4a6f7c2cbe8be01566ff84a) {if (!is_numeric($v72ee76c5c29383b7c9f9225c1fa4d10b) || !is_numeric($vf585b7f018bb4ced15a03683a733e50b)) {throw new \ErrorException(getLabel('error-wrong-domain-and-lang-ids'));}$this->domainId = $v72ee76c5c29383b7c9f9225c1fa4d10b;$this->langId = $vf585b7f018bb4ced15a03683a733e50b;$this->setRegistry($va9205dcfd4a6f7c2cbe8be01566ff84a);}public function shouldUseCustomSettings() {return (bool) $this->getRegistry()->get("{$this->getPrefix()}/use-custom-settings");}public function setShouldUseCustomSettings($v327a6c4304ad5938eaf0efb6cc3e53dc) {$this->getRegistry()->set("{$this->getPrefix()}/use-custom-settings", $v327a6c4304ad5938eaf0efb6cc3e53dc);return $this;}public function isIpStub() {return $this->isUseConfigDirective('stub', 'enabled-for-domain');}public function setIpStub($v181c94263f0b71f3aac03c6e252db5fd) {$this->setConfigDirective($v181c94263f0b71f3aac03c6e252db5fd, 'stub', 'enabled-for-domain');return $this;}public function isUseBlackList() {return $this->isUseConfigDirective(    'kernel',    'use-ip-blacklist-guide-for-domain'   );}public function setUseBlackList($v181c94263f0b71f3aac03c6e252db5fd) {$this->setConfigDirective($v181c94263f0b71f3aac03c6e252db5fd, 'kernel', 'use-ip-blacklist-guide-for-domain');return $this;}public function getBlackList() {return $this->getGuideList('ip-blacklist');}public function addToBlackList($vb068931cc450442b63f5b3d276ea4297) {return $this->addToGuide($vb068931cc450442b63f5b3d276ea4297, 'ip-blacklist');}public function getStubFilePath() {return CURRENT_WORKING_DIR    . iSettings::STUB_DIRECTORY    . iSettings::FILE_NAME    . '_'    . $this->domainId    . iSettings::FILE_EXTENSION;}protected function getPrefix() {return "//umiStub/{$this->domainId}/{$this->langId}";}protected function validateObject(\iUmiObject $va8cfde6331bd59eb2ac96f8911c4b666) {return $va8cfde6331bd59eb2ac96f8911c4b666->getValue('domain_id') == $this->domainId;}protected function addToGuide($vb068931cc450442b63f5b3d276ea4297, $v1e0ca5b1252f1f6b1e0ac91be7e7219e) {$v16b2b26000987faccb260b9d39df1269 = $this->createObject($vb068931cc450442b63f5b3d276ea4297, $v1e0ca5b1252f1f6b1e0ac91be7e7219e);$va8cfde6331bd59eb2ac96f8911c4b666 = \umiObjectsCollection::getInstance()    ->getById($v16b2b26000987faccb260b9d39df1269);if (!$va8cfde6331bd59eb2ac96f8911c4b666 instanceof \iUmiObject) {return false;}$va8cfde6331bd59eb2ac96f8911c4b666->setValue('domain_id', $this->domainId);$va8cfde6331bd59eb2ac96f8911c4b666->commit();return $v16b2b26000987faccb260b9d39df1269;}private function getHost() {return Service::DomainCollection()    ->getDomain($this->domainId)    ->getHost();}protected function isUseConfigDirective($vdb0f6f37ebeb6ea09489124345af2a45, $ve1317e393c4c13c1bba0195dd20eceb8) {$v9348c895145fa0e884a5de5201664d74 = \mainConfiguration::getInstance()    ->get($vdb0f6f37ebeb6ea09489124345af2a45, $ve1317e393c4c13c1bba0195dd20eceb8);return $this->isHostInList($v9348c895145fa0e884a5de5201664d74);}protected function setConfigDirective($v181c94263f0b71f3aac03c6e252db5fd, $vdb0f6f37ebeb6ea09489124345af2a45, $ve1317e393c4c13c1bba0195dd20eceb8) {$v344830ca72240f3547ea2edbf6b47537 = \mainConfiguration::getInstance();$v01ea60d3d7fb8fba10bf42c7780fb944 = $v344830ca72240f3547ea2edbf6b47537->get($vdb0f6f37ebeb6ea09489124345af2a45, $ve1317e393c4c13c1bba0195dd20eceb8) ?: [];$vb33b3ead41f5e4549519fa62a1f545d5 = $this->isHostInList($v01ea60d3d7fb8fba10bf42c7780fb944);$v67b3dba8bc6778101892eb77249db32e = $this->getHost();if ($v181c94263f0b71f3aac03c6e252db5fd && !$vb33b3ead41f5e4549519fa62a1f545d5) {$v01ea60d3d7fb8fba10bf42c7780fb944[] = $v67b3dba8bc6778101892eb77249db32e;}elseif (!$v181c94263f0b71f3aac03c6e252db5fd && $vb33b3ead41f5e4549519fa62a1f545d5) {$v01ea60d3d7fb8fba10bf42c7780fb944 = array_diff($v01ea60d3d7fb8fba10bf42c7780fb944, [$v67b3dba8bc6778101892eb77249db32e]);}$v344830ca72240f3547ea2edbf6b47537->set($vdb0f6f37ebeb6ea09489124345af2a45, $ve1317e393c4c13c1bba0195dd20eceb8, $v01ea60d3d7fb8fba10bf42c7780fb944);$v344830ca72240f3547ea2edbf6b47537->save();return $this;}private function isHostInList($v10ae9fc7d453b0dd525d0edf2ede7961) {return is_array($v10ae9fc7d453b0dd525d0edf2ede7961) ? in_array($this->getHost(), $v10ae9fc7d453b0dd525d0edf2ede7961) : false;}}