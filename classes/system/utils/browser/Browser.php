<?php
 use UmiCms\Service;use UmiCms\System\Cache\iEngineFactory;use UmiCms\Utils\Browser\iDetector;class BrowserDetect implements iDetector {private $_agent = '';private $_browser_name = '';private $_version = '';private $_platform = '';private $_os = '';private $_is_aol = false;private $_is_mobile = false;private $_is_tablet = false;private $_is_robot = false;private $_is_facebook = false;private $_aol_version = '';private $cacheStorage;const BROWSER_UNKNOWN = 'unknown';const VERSION_UNKNOWN = 'unknown';const BROWSER_OPERA = 'Opera';const BROWSER_OPERA_MINI = 'Opera Mini';const BROWSER_WEBTV = 'WebTV';const BROWSER_EDGE = 'Edge';const BROWSER_IE = 'Internet Explorer';const BROWSER_POCKET_IE = 'Pocket Internet Explorer';const BROWSER_KONQUEROR = 'Konqueror';const BROWSER_ICAB = 'iCab';const BROWSER_OMNIWEB = 'OmniWeb';const BROWSER_FIREBIRD = 'Firebird';const BROWSER_FIREFOX = 'Firefox';const BROWSER_ICEWEASEL = 'Iceweasel';const BROWSER_SHIRETOKO = 'Shiretoko';const BROWSER_MOZILLA = 'Mozilla';const BROWSER_AMAYA = 'Amaya';const BROWSER_LYNX = 'Lynx';const BROWSER_SAFARI = 'Safari';const BROWSER_IPHONE = 'iPhone';const BROWSER_IPOD = 'iPod';const BROWSER_IPAD = 'iPad';const BROWSER_CHROME = 'Chrome';const BROWSER_ANDROID = 'Android';const BROWSER_GOOGLEBOT = 'GoogleBot';const BROWSER_YANDEXBOT = 'YandexBot';const BROWSER_ALEXABOT = 'AlexaBot';const BROWSER_SLURP = 'Yahoo! Slurp';const BROWSER_W3CVALIDATOR = 'W3C Validator';const BROWSER_BLACKBERRY = 'BlackBerry';const BROWSER_ICECAT = 'IceCat';const BROWSER_NOKIA_S60 = 'Nokia S60 OSS Browser';const BROWSER_NOKIA = 'Nokia Browser';const BROWSER_MSN = 'MSN Browser';const BROWSER_MSNBOT = 'MSN Bot';const BROWSER_BINGBOT = 'Bing Bot';const BROWSER_VIVALDI = 'Vivalidi';const BROWSER_NETSCAPE_NAVIGATOR = 'Netscape Navigator';const BROWSER_GALEON = 'Galeon';const BROWSER_NETPOSITIVE = 'NetPositive';const BROWSER_PHOENIX = 'Phoenix';const PLATFORM_UNKNOWN = 'unknown';const PLATFORM_WINDOWS = 'Windows';const PLATFORM_WINDOWS_CE = 'Windows CE';const PLATFORM_APPLE = 'Apple';const PLATFORM_LINUX = 'Linux';const PLATFORM_OS2 = 'OS/2';const PLATFORM_BEOS = 'BeOS';const PLATFORM_IPHONE = 'iPhone';const PLATFORM_IPOD = 'iPod';const PLATFORM_IPAD = 'iPad';const PLATFORM_BLACKBERRY = 'BlackBerry';const PLATFORM_NOKIA = 'Nokia';const PLATFORM_FREEBSD = 'FreeBSD';const PLATFORM_OPENBSD = 'OpenBSD';const PLATFORM_NETBSD = 'NetBSD';const PLATFORM_SUNOS = 'SunOS';const PLATFORM_OPENSOLARIS = 'OpenSolaris';const PLATFORM_ANDROID = 'Android';const OPERATING_SYSTEM_UNKNOWN = 'unknown';public function __construct(iEngineFactory $vee6316dc7b5be0162754ea161e3eaf8f) {$this->cacheStorage = $vee6316dc7b5be0162754ea161e3eaf8f->create();}public function reset() {$this->_agent = '';$this->_browser_name = self::BROWSER_UNKNOWN;$this->_version = self::VERSION_UNKNOWN;$this->_platform = self::PLATFORM_UNKNOWN;$this->_os = self::OPERATING_SYSTEM_UNKNOWN;$this->_is_aol = false;$this->_is_mobile = false;$this->_is_tablet = false;$this->_is_robot = false;$this->_is_facebook = false;$this->_aol_version = self::VERSION_UNKNOWN;}public function isBrowser($vf6561eced34abdcbf7968a029a91c11d) {return (strcasecmp($this->_browser_name, trim($vf6561eced34abdcbf7968a029a91c11d)) == 0);}public function getBrowser() {return $this->_browser_name;}public function setBrowser($v8e3f1bbb73f0f6c952fcf873332eae9f) {$this->_browser_name = $v8e3f1bbb73f0f6c952fcf873332eae9f;}public function getPlatform() {return $this->_platform;}public function setPlatform($v34a6e5d64ade17ef4e51612c50dd72f5) {$this->_platform = $v34a6e5d64ade17ef4e51612c50dd72f5;}public function getVersion() {return $this->_version;}public function setVersion($v2af72f100c356273d46284f6fd1dfc08) {$this->_version = preg_replace('/[^0-9,.,a-z,A-Z-]/', '', $v2af72f100c356273d46284f6fd1dfc08);}public function getAolVersion() {return $this->_aol_version;}public function setAolVersion($v2af72f100c356273d46284f6fd1dfc08) {$this->_aol_version = preg_replace('/[^0-9,.,a-z,A-Z]/', '', $v2af72f100c356273d46284f6fd1dfc08);}public function isAol() {return $this->_is_aol;}public function isMobile() {return $this->_is_mobile;}public function isTablet() {return $this->_is_tablet;}public function isRobot() {return $this->_is_robot;}public function isFacebook() {return $this->_is_facebook;}public function setAol($vc589ade5b30012c43d35b603bff8dd0c) {$this->_is_aol = $vc589ade5b30012c43d35b603bff8dd0c;}protected function setMobile($v2063c1608d6e0baf80249c42e2be5804 = true) {$this->_is_mobile = $v2063c1608d6e0baf80249c42e2be5804;}protected function setTablet($v2063c1608d6e0baf80249c42e2be5804 = true) {$this->_is_tablet = $v2063c1608d6e0baf80249c42e2be5804;}protected function setRobot($v2063c1608d6e0baf80249c42e2be5804 = true) {$this->_is_robot = $v2063c1608d6e0baf80249c42e2be5804;}protected function setFacebook($v2063c1608d6e0baf80249c42e2be5804 = true) {$this->_is_facebook = $v2063c1608d6e0baf80249c42e2be5804;}public function getUserAgent() {return $this->_agent;}public function setUserAgent($vbfa8b072930d9423ce86bebf883227cf) {$this->reset();$this->_agent = $vbfa8b072930d9423ce86bebf883227cf;$this->determine();}public function isChromeFrame() {return (mb_strpos($this->_agent, 'chromeframe') !== false);}public function __toString() {return "<strong>Browser Name:</strong> {$this->getBrowser()}<br/>\n" .    "<strong>Browser Version:</strong> {$this->getVersion()}<br/>\n" .    "<strong>Browser User Agent String:</strong> {$this->getUserAgent()}<br/>\n" .    "<strong>Platform:</strong> {$this->getPlatform()}<br/>";}protected function determine() {$v3c6e0b8a9c15224a8228b9a98ca1531d = md5(mb_strtolower(trim($this->_agent)));$v21ffce5b8a6cc8cc6a41448dd69623c9 = $this->loadFromCache($v3c6e0b8a9c15224a8228b9a98ca1531d);if (empty($v21ffce5b8a6cc8cc6a41448dd69623c9)) {$this->checkPlatform();$this->checkBrowsers();$this->checkForAol();$v8d777f385d3dfec8815d20f7496026dc = [     '_browser_name' => $this->getBrowser(),     '_version' => $this->getVersion(),     '_platform' => $this->getPlatform(),     '_os' => $this->_os,     '_is_aol' => $this->isAol(),     '_is_mobile' => $this->isMobile(),     '_is_tablet' => $this->isTablet(),     '_is_robot' => $this->isRobot(),     '_is_facebook' => $this->isFacebook(),     '_aol_version' => $this->getAolVersion()    ];$this->saveToCache($v3c6e0b8a9c15224a8228b9a98ca1531d, $v8d777f385d3dfec8815d20f7496026dc);}else {foreach ($v21ffce5b8a6cc8cc6a41448dd69623c9 as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v2063c1608d6e0baf80249c42e2be5804) {$this->$v3c6e0b8a9c15224a8228b9a98ca1531d = $v2063c1608d6e0baf80249c42e2be5804;}}}protected function checkBrowsers() {return (    $this->checkBrowserWebTv() ||    $this->checkBrowserEdge() ||    $this->checkBrowserInternetExplorer() ||    $this->checkBrowserOpera() ||    $this->checkBrowserGaleon() ||    $this->checkBrowserNetscapeNavigator9Plus() ||    $this->checkBrowserVivaldi() ||    $this->checkBrowserFirefox() ||    $this->checkBrowserChrome() ||    $this->checkBrowserOmniWeb() ||    $this->checkBrowserAndroid() ||    $this->checkBrowseriPad() ||    $this->checkBrowseriPod() ||    $this->checkBrowseriPhone() ||    $this->checkBrowserBlackBerry() ||    $this->checkBrowserNokia() ||    $this->checkBrowserGoogleBot() ||    $this->checkBrowserMSNBot() ||    $this->checkBrowserBingBot() ||    $this->checkBrowserSlurp() ||    $this->checkBrowserYandexBot() ||    $this->checkBrowserAlexaBot() ||    $this->checkFacebookExternalHit() ||    $this->checkBrowserSafari() ||    $this->checkBrowserNetPositive() ||    $this->checkBrowserFirebird() ||    $this->checkBrowserKonqueror() ||    $this->checkBrowserIcab() ||    $this->checkBrowserPhoenix() ||    $this->checkBrowserAmaya() ||    $this->checkBrowserLynx() ||    $this->checkBrowserShiretoko() ||    $this->checkBrowserIceCat() ||    $this->checkBrowserIceweasel() ||    $this->checkBrowserW3CValidator() ||    $this->checkBrowserMozilla() );}protected function checkBrowserBlackBerry() {if (stripos($this->_agent, 'blackberry') !== false) {$result = explode('/', stristr($this->_agent, 'BlackBerry'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->_browser_name = self::BROWSER_BLACKBERRY;$this->setMobile();return true;}}return false;}protected function checkForAol() {$this->setAol(false);$this->setAolVersion(self::VERSION_UNKNOWN);if (stripos($this->_agent, 'aol') !== false) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', stristr($this->_agent, 'AOL'));if (isset($v2af72f100c356273d46284f6fd1dfc08[1])) {$this->setAol(true);$this->setAolVersion(preg_replace('/[^0-9\.a-z]/i', '', $v2af72f100c356273d46284f6fd1dfc08[1]));return true;}}return false;}protected function checkBrowserGoogleBot() {if (stripos($this->_agent, 'googlebot') !== false) {$result = explode('/', stristr($this->_agent, 'googlebot'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion(str_replace(';', '', $v2af72f100c356273d46284f6fd1dfc08[0]));$this->_browser_name = self::BROWSER_GOOGLEBOT;$this->setRobot();return true;}}return false;}protected function checkBrowserMSNBot() {if (stripos($this->_agent, 'msnbot') !== false) {$result = explode('/', stristr($this->_agent, 'msnbot'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion(str_replace(';', '', $v2af72f100c356273d46284f6fd1dfc08[0]));$this->_browser_name = self::BROWSER_MSNBOT;$this->setRobot();return true;}}return false;}protected function checkBrowserBingBot() {if (stripos($this->_agent, 'bingbot') !== false) {$result = explode('/', stristr($this->_agent, 'bingbot'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion(str_replace(';', '', $v2af72f100c356273d46284f6fd1dfc08[0]));$this->_browser_name = self::BROWSER_BINGBOT;$this->setRobot();return true;}}return false;}protected function checkBrowserYandexBot() {$ve61b5771de98ecb3747bd9624a6ca7eb = [    'YandexBot',     'YandexMobileBot',    'YandexImages',    'YandexVideo',    'YandexVideoParser',    'YandexMedia',    'YandexBlogs',    'YandexFavicons',    'YandexWebmaster',    'YandexPagechecker',    'YandexImageResizer',    'YandexDirect',    'YandexMetrika',    'YandexNews',    'YandexCatalog',    'YandexVertis'   ];foreach ($ve61b5771de98ecb3747bd9624a6ca7eb as $vebb453d9b7799989954671a4c5fbfde0) {if (stripos($this->_agent, $vebb453d9b7799989954671a4c5fbfde0) !== false) {$v0812fd760ed7d8e486079d199560e9aa = explode('/', stristr($this->_agent, $vebb453d9b7799989954671a4c5fbfde0));if (isset($v0812fd760ed7d8e486079d199560e9aa[1])) {$v96a32ec0a4fa9a548081313989245c72 = explode(' ', $v0812fd760ed7d8e486079d199560e9aa[1]);$this->setVersion(str_replace(';', '', $v96a32ec0a4fa9a548081313989245c72[0]));$this->_browser_name = self::BROWSER_YANDEXBOT;$this->setRobot(true);return true;}}}return false;}protected function checkBrowserAlexaBot() {if (stripos($this->_agent, 'ia_archiver') !== false) {$this->_browser_name = self::BROWSER_ALEXABOT;$this->setRobot(true);return true;}return false;}protected function checkBrowserW3CValidator() {if (stripos($this->_agent, 'W3C-checklink') !== false) {$result = explode('/', stristr($this->_agent, 'W3C-checklink'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->_browser_name = self::BROWSER_W3CVALIDATOR;return true;}}else {if (stripos($this->_agent, 'W3C_Validator') !== false) {$v5269f4d75f5bc75f0f94bab2100a5531 = str_replace('W3C_Validator ', 'W3C_Validator/', $this->_agent);$result = explode('/', stristr($v5269f4d75f5bc75f0f94bab2100a5531, 'W3C_Validator'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->_browser_name = self::BROWSER_W3CVALIDATOR;return true;}}else {if (stripos($this->_agent, 'W3C-mobileOK') !== false) {$this->_browser_name = self::BROWSER_W3CVALIDATOR;$this->setMobile();return true;}}}return false;}protected function checkBrowserSlurp() {if (stripos($this->_agent, 'slurp') !== false) {$result = explode('/', stristr($this->_agent, 'Slurp'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->_browser_name = self::BROWSER_SLURP;$this->setRobot();$this->setMobile(false);return true;}}return false;}protected function checkBrowserEdge() {if (stripos($this->_agent, 'Edge/') !== false) {$result = explode('/', stristr($this->_agent, 'Edge'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_EDGE);if (stripos($this->_agent, 'Windows Phone') !== false || stripos($this->_agent, 'Android') !== false) {$this->setMobile();}return true;}}return false;}protected function checkBrowserInternetExplorer() {if (stripos($this->_agent, 'Trident/7.0; rv:11.0') !== false) {$this->setBrowser(self::BROWSER_IE);$this->setVersion('11.0');return true;}if (stripos($this->_agent, 'microsoft internet explorer') !== false) {$this->setBrowser(self::BROWSER_IE);$this->setVersion('1.0');$result = stristr($this->_agent, '/');if (preg_match('/308|425|426|474|0b1/i', $result)) {$this->setVersion('1.5');}return true;}if (stripos($this->_agent, 'msie') !== false && stripos($this->_agent, 'opera') === false) {if (stripos($this->_agent, 'msnb') !== false) {$result = explode(' ', stristr(str_replace(';', '; ', $this->_agent), 'MSN'));if (isset($result[1])) {$this->setBrowser(self::BROWSER_MSN);$this->setVersion(str_replace(['(', ')', ';'], '', $result[1]));return true;}}$result = explode(' ', stristr(str_replace(';', '; ', $this->_agent), 'msie'));if (isset($result[1])) {$this->setBrowser(self::BROWSER_IE);$this->setVersion(str_replace(['(', ')', ';'], '', $result[1]));if (stripos($this->_agent, 'IEMobile') !== false) {$this->setBrowser(self::BROWSER_POCKET_IE);$this->setMobile();}return true;}}else {if (stripos($this->_agent, 'trident') !== false) {$this->setBrowser(self::BROWSER_IE);$result = explode('rv:', $this->_agent);if (isset($result[1])) {$this->setVersion(preg_replace('/[^0-9.]+/', '', $result[1]));$this->_agent = str_replace(['Mozilla', 'Gecko'], 'MSIE', $this->_agent);}}else {if (stripos($this->_agent, 'mspie') !== false || stripos($this->_agent, 'pocket') !== false) {$result = explode(' ', stristr($this->_agent, 'mspie'));if (isset($result[1])) {$this->setPlatform(self::PLATFORM_WINDOWS_CE);$this->setBrowser(self::BROWSER_POCKET_IE);$this->setMobile();if (stripos($this->_agent, 'mspie') !== false) {$this->setVersion($result[1]);}else {$v2af72f100c356273d46284f6fd1dfc08 = explode('/', $this->_agent);if (isset($v2af72f100c356273d46284f6fd1dfc08[1])) {$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[1]);}}return true;}}}}return false;}protected function checkBrowserOpera() {if (stripos($this->_agent, 'opera mini') !== false) {$vfc7bef1102e344c6262dfe91b1cc2cf9 = stristr($this->_agent, 'opera mini');if (preg_match('/\//', $vfc7bef1102e344c6262dfe91b1cc2cf9)) {$result = explode('/', $vfc7bef1102e344c6262dfe91b1cc2cf9);if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);}}else {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', stristr($vfc7bef1102e344c6262dfe91b1cc2cf9, 'opera mini'));if (isset($v2af72f100c356273d46284f6fd1dfc08[1])) {$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[1]);}}$this->_browser_name = self::BROWSER_OPERA_MINI;$this->setMobile();return true;}if (stripos($this->_agent, 'opera') !== false) {$vfc7bef1102e344c6262dfe91b1cc2cf9 = stristr($this->_agent, 'opera');if (preg_match('/Version\/(1*.*)$/', $vfc7bef1102e344c6262dfe91b1cc2cf9, $v9c28d32df234037773be184dbdafc274)) {$this->setVersion($v9c28d32df234037773be184dbdafc274[1]);}else {if (preg_match('/\//', $vfc7bef1102e344c6262dfe91b1cc2cf9)) {$result = explode('/', str_replace('(', ' ', $vfc7bef1102e344c6262dfe91b1cc2cf9));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);}}else {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', stristr($vfc7bef1102e344c6262dfe91b1cc2cf9, 'opera'));$this->setVersion(isset($v2af72f100c356273d46284f6fd1dfc08[1]) ? $v2af72f100c356273d46284f6fd1dfc08[1] : '');}}if (stripos($this->_agent, 'Opera Mobi') !== false) {$this->setMobile();}$this->_browser_name = self::BROWSER_OPERA;return true;}if (stripos($this->_agent, 'OPR') !== false) {$vfc7bef1102e344c6262dfe91b1cc2cf9 = stristr($this->_agent, 'OPR');if (preg_match('/\//', $vfc7bef1102e344c6262dfe91b1cc2cf9)) {$result = explode('/', str_replace('(', ' ', $vfc7bef1102e344c6262dfe91b1cc2cf9));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);}}if (stripos($this->_agent, 'Mobile') !== false) {$this->setMobile();}$this->_browser_name = self::BROWSER_OPERA;return true;}return false;}protected function checkBrowserChrome() {if (stripos($this->_agent, 'Chrome') !== false) {$result = explode('/', stristr($this->_agent, 'Chrome'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_CHROME);if (stripos($this->_agent, 'Android') !== false) {if (stripos($this->_agent, 'Mobile') !== false) {$this->setMobile();}else {$this->setTablet();}}return true;}}return false;}protected function checkBrowserWebTv() {if (stripos($this->_agent, 'webtv') !== false) {$result = explode('/', stristr($this->_agent, 'webtv'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_WEBTV);return true;}}return false;}protected function checkBrowserNetPositive() {if (stripos($this->_agent, 'NetPositive') !== false) {$result = explode('/', stristr($this->_agent, 'NetPositive'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion(str_replace(['(', ')', ';'], '', $v2af72f100c356273d46284f6fd1dfc08[0]));$this->setBrowser(self::BROWSER_NETPOSITIVE);return true;}}return false;}protected function checkBrowserGaleon() {if (stripos($this->_agent, 'galeon') !== false) {$result = explode(' ', stristr($this->_agent, 'galeon'));$v2af72f100c356273d46284f6fd1dfc08 = explode('/', $result[0]);if (isset($v2af72f100c356273d46284f6fd1dfc08[1])) {$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[1]);$this->setBrowser(self::BROWSER_GALEON);return true;}}return false;}protected function checkBrowserKonqueror() {if (stripos($this->_agent, 'Konqueror') !== false) {$result = explode(' ', stristr($this->_agent, 'Konqueror'));$v2af72f100c356273d46284f6fd1dfc08 = explode('/', $result[0]);if (isset($v2af72f100c356273d46284f6fd1dfc08[1])) {$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[1]);$this->setBrowser(self::BROWSER_KONQUEROR);return true;}}return false;}protected function checkBrowserIcab() {if (stripos($this->_agent, 'icab') !== false) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', stristr(str_replace('/', ' ', $this->_agent), 'icab'));if (isset($v2af72f100c356273d46284f6fd1dfc08[1])) {$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[1]);$this->setBrowser(self::BROWSER_ICAB);return true;}}return false;}protected function checkBrowserOmniWeb() {if (stripos($this->_agent, 'omniweb') !== false) {$result = explode('/', stristr($this->_agent, 'omniweb'));$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', isset($result[1]) ? $result[1] : '');$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_OMNIWEB);return true;}return false;}protected function checkBrowserPhoenix() {if (stripos($this->_agent, 'Phoenix') !== false) {$v2af72f100c356273d46284f6fd1dfc08 = explode('/', stristr($this->_agent, 'Phoenix'));if (isset($v2af72f100c356273d46284f6fd1dfc08[1])) {$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[1]);$this->setBrowser(self::BROWSER_PHOENIX);return true;}}return false;}protected function checkBrowserFirebird() {if (stripos($this->_agent, 'Firebird') !== false) {$v2af72f100c356273d46284f6fd1dfc08 = explode('/', stristr($this->_agent, 'Firebird'));if (isset($v2af72f100c356273d46284f6fd1dfc08[1])) {$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[1]);$this->setBrowser(self::BROWSER_FIREBIRD);return true;}}return false;}protected function checkBrowserNetscapeNavigator9Plus() {if (stripos($this->_agent, 'Firefox') !== false &&    preg_match('/Navigator\/([^ ]*)/i', $this->_agent, $v9c28d32df234037773be184dbdafc274)) {$this->setVersion($v9c28d32df234037773be184dbdafc274[1]);$this->setBrowser(self::BROWSER_NETSCAPE_NAVIGATOR);return true;}if (stripos($this->_agent, 'Firefox') === false &&    preg_match('/Netscape6?\/([^ ]*)/i', $this->_agent, $v9c28d32df234037773be184dbdafc274)) {$this->setVersion($v9c28d32df234037773be184dbdafc274[1]);$this->setBrowser(self::BROWSER_NETSCAPE_NAVIGATOR);return true;}return false;}protected function checkBrowserShiretoko() {if (stripos($this->_agent, 'Mozilla') !== false &&    preg_match('/Shiretoko\/([^ ]*)/i', $this->_agent, $v9c28d32df234037773be184dbdafc274)) {$this->setVersion($v9c28d32df234037773be184dbdafc274[1]);$this->setBrowser(self::BROWSER_SHIRETOKO);return true;}return false;}protected function checkBrowserIceCat() {if (stripos($this->_agent, 'Mozilla') !== false && preg_match('/IceCat\/([^ ]*)/i', $this->_agent, $v9c28d32df234037773be184dbdafc274)) {$this->setVersion($v9c28d32df234037773be184dbdafc274[1]);$this->setBrowser(self::BROWSER_ICECAT);return true;}return false;}protected function checkBrowserNokia() {if (preg_match("/Nokia([^\/]+)\/([^ SP]+)/i", $this->_agent, $v9c28d32df234037773be184dbdafc274)) {$this->setVersion($v9c28d32df234037773be184dbdafc274[2]);if (stripos($this->_agent, 'Series60') !== false || mb_strpos($this->_agent, 'S60') !== false) {$this->setBrowser(self::BROWSER_NOKIA_S60);}else {$this->setBrowser(self::BROWSER_NOKIA);}$this->setMobile();return true;}return false;}protected function checkBrowserFirefox() {if (stripos($this->_agent, 'safari') === false) {if (preg_match("/Firefox[\/ \(]([^ ;\)]+)/i", $this->_agent, $v9c28d32df234037773be184dbdafc274)) {$this->setVersion($v9c28d32df234037773be184dbdafc274[1]);$this->setBrowser(self::BROWSER_FIREFOX);if (stripos($this->_agent, 'Android') !== false) {if (stripos($this->_agent, 'Mobile') !== false) {$this->setMobile();}else {$this->setTablet();}}return true;}if (preg_match('/Firefox$/i', $this->_agent, $v9c28d32df234037773be184dbdafc274)) {$this->setVersion('');$this->setBrowser(self::BROWSER_FIREFOX);return true;}}return false;}protected function checkBrowserIceweasel() {if (stripos($this->_agent, 'Iceweasel') !== false) {$result = explode('/', stristr($this->_agent, 'Iceweasel'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_ICEWEASEL);return true;}}return false;}protected function checkBrowserMozilla() {if (stripos($this->_agent, 'mozilla') !== false && preg_match('/rv:[0-9].[0-9][a-b]?/i', $this->_agent) &&    stripos($this->_agent, 'netscape') === false) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', stristr($this->_agent, 'rv:'));preg_match('/rv:[0-9].[0-9][a-b]?/i', $this->_agent, $v2af72f100c356273d46284f6fd1dfc08);$this->setVersion(str_replace('rv:', '', $v2af72f100c356273d46284f6fd1dfc08[0]));$this->setBrowser(self::BROWSER_MOZILLA);return true;}if (stripos($this->_agent, 'mozilla') !== false && preg_match('/rv:[0-9]\.[0-9]/i', $this->_agent) &&    stripos($this->_agent, 'netscape') === false) {$v2af72f100c356273d46284f6fd1dfc08 = explode('', stristr($this->_agent, 'rv:'));$this->setVersion(str_replace('rv:', '', $v2af72f100c356273d46284f6fd1dfc08[0]));$this->setBrowser(self::BROWSER_MOZILLA);return true;}if (stripos($this->_agent, 'mozilla') !== false && preg_match('/mozilla\/([^ ]*)/i', $this->_agent, $v9c28d32df234037773be184dbdafc274) &&    stripos($this->_agent, 'netscape') === false) {$this->setVersion($v9c28d32df234037773be184dbdafc274[1]);$this->setBrowser(self::BROWSER_MOZILLA);return true;}return false;}protected function checkBrowserLynx() {if (stripos($this->_agent, 'lynx') !== false) {$result = explode('/', stristr($this->_agent, 'Lynx'));$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', (isset($result[1]) ? $result[1] : ''));$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_LYNX);return true;}return false;}protected function checkBrowserAmaya() {if (stripos($this->_agent, 'amaya') !== false) {$result = explode('/', stristr($this->_agent, 'Amaya'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_AMAYA);return true;}}return false;}protected function checkBrowserSafari() {if (stripos($this->_agent, 'Safari') !== false    && stripos($this->_agent, 'iPhone') === false    && stripos($this->_agent, 'iPod') === false) {$result = explode('/', stristr($this->_agent, 'Version'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);}else {$this->setVersion(self::VERSION_UNKNOWN);}$this->setBrowser(self::BROWSER_SAFARI);return true;}return false;}protected function checkFacebookExternalHit() {if (stristr($this->_agent, 'FacebookExternalHit')) {$this->setRobot();$this->setFacebook();return true;}return false;}protected function checkForFacebookIos() {if (stristr($this->_agent, 'FBIOS')) {$this->setFacebook();return true;}return false;}protected function getSafariVersionOnIos() {$result = explode('/', stristr($this->_agent, 'Version'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);return true;}return false;}protected function getChromeVersionOnIos() {$result = explode('/', stristr($this->_agent, 'CriOS'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_CHROME);return true;}return false;}protected function checkBrowseriPhone() {if (stripos($this->_agent, 'iPhone') !== false) {$this->setVersion(self::VERSION_UNKNOWN);$this->setBrowser(self::BROWSER_IPHONE);$this->getSafariVersionOnIos();$this->getChromeVersionOnIos();$this->checkForFacebookIos();$this->setMobile();return true;}return false;}protected function checkBrowseriPad() {if (stripos($this->_agent, 'iPad') !== false) {$this->setVersion(self::VERSION_UNKNOWN);$this->setBrowser(self::BROWSER_IPAD);$this->getSafariVersionOnIos();$this->getChromeVersionOnIos();$this->checkForFacebookIos();$this->setTablet();return true;}return false;}protected function checkBrowseriPod() {if (stripos($this->_agent, 'iPod') !== false) {$this->setVersion(self::VERSION_UNKNOWN);$this->setBrowser(self::BROWSER_IPOD);$this->getSafariVersionOnIos();$this->getChromeVersionOnIos();$this->checkForFacebookIos();$this->setMobile();return true;}return false;}protected function checkBrowserAndroid() {if (stripos($this->_agent, 'Android') !== false) {$result = explode(' ', stristr($this->_agent, 'Android'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);}else {$this->setVersion(self::VERSION_UNKNOWN);}if (stripos($this->_agent, 'Mobile') !== false) {$this->setMobile();}else {$this->setTablet();}$this->setBrowser(self::BROWSER_ANDROID);return true;}return false;}protected function checkBrowserVivaldi() {if (stripos($this->_agent, 'Vivaldi') !== false) {$result = explode('/', stristr($this->_agent, 'Vivaldi'));if (isset($result[1])) {$v2af72f100c356273d46284f6fd1dfc08 = explode(' ', $result[1]);$this->setVersion($v2af72f100c356273d46284f6fd1dfc08[0]);$this->setBrowser(self::BROWSER_VIVALDI);return true;}}return false;}protected function checkPlatform() {if (stripos($this->_agent, 'windows') !== false) {$this->_platform = self::PLATFORM_WINDOWS;}else {if (stripos($this->_agent, 'iPad') !== false) {$this->_platform = self::PLATFORM_IPAD;}else {if (stripos($this->_agent, 'iPod') !== false) {$this->_platform = self::PLATFORM_IPOD;}else {if (stripos($this->_agent, 'iPhone') !== false) {$this->_platform = self::PLATFORM_IPHONE;}elseif (stripos($this->_agent, 'mac') !== false) {$this->_platform = self::PLATFORM_APPLE;}elseif (stripos($this->_agent, 'android') !== false) {$this->_platform = self::PLATFORM_ANDROID;}elseif (stripos($this->_agent, 'linux') !== false) {$this->_platform = self::PLATFORM_LINUX;}else {if (stripos($this->_agent, 'Nokia') !== false) {$this->_platform = self::PLATFORM_NOKIA;}else {if (stripos($this->_agent, 'BlackBerry') !== false) {$this->_platform = self::PLATFORM_BLACKBERRY;}elseif (stripos($this->_agent, 'FreeBSD') !== false) {$this->_platform = self::PLATFORM_FREEBSD;}elseif (stripos($this->_agent, 'OpenBSD') !== false) {$this->_platform = self::PLATFORM_OPENBSD;}elseif (stripos($this->_agent, 'NetBSD') !== false) {$this->_platform = self::PLATFORM_NETBSD;}elseif (stripos($this->_agent, 'OpenSolaris') !== false) {$this->_platform = self::PLATFORM_OPENSOLARIS;}elseif (stripos($this->_agent, 'SunOS') !== false) {$this->_platform = self::PLATFORM_SUNOS;}elseif (stripos($this->_agent, 'OS\/2') !== false) {$this->_platform = self::PLATFORM_OS2;}elseif (stripos($this->_agent, 'BeOS') !== false) {$this->_platform = self::PLATFORM_BEOS;}elseif (stripos($this->_agent, 'win') !== false) {$this->_platform = self::PLATFORM_WINDOWS;}}}}}}}public static function getInstance() {return Service::BrowserDetector();}private function loadFromCache($v3c6e0b8a9c15224a8228b9a98ca1531d) {$v8d777f385d3dfec8815d20f7496026dc = $this->getCacheStorage()    ->loadRawData($v3c6e0b8a9c15224a8228b9a98ca1531d);$v2aad5ac74851c8c932bf25ba8368b364 = json_decode($v8d777f385d3dfec8815d20f7496026dc, true);return is_array($v2aad5ac74851c8c932bf25ba8368b364) ? $v2aad5ac74851c8c932bf25ba8368b364 : [];}private function saveToCache($v3c6e0b8a9c15224a8228b9a98ca1531d, array $v21ffce5b8a6cc8cc6a41448dd69623c9) {return $this->getCacheStorage()    ->saveRawData($v3c6e0b8a9c15224a8228b9a98ca1531d, json_encode($v21ffce5b8a6cc8cc6a41448dd69623c9), strtotime('+2 year'));}private function getCacheStorage() {return $this->cacheStorage;}}