<?php
 namespace UmiCms\Classes\System\Utils\Captcha\Strategies;use UmiCms\Service;class GoogleRecaptcha extends CaptchaStrategy {public function getName() {return 'recaptcha';}const WIDGET_URL = 'https://www.google.com/recaptcha/api.js';const VERIFICATION_URL = 'https://www.google.com/recaptcha/api/siteverify';public function generate($v66f6181bcb4cff4cd38fbc804a036db6, $v56d72c4d5259a6034a152e6c02cd754c, $vf66412bef9a4d9ac818c3141160250bd, $v123c50dcaa827353e19cd0140ab2c896) {if (!$this->isRequired()) {return '';}list($v95d3f835e33421d88a011e7f95918ec0) = \def_module::loadTemplates('captcha/' . $v66f6181bcb4cff4cd38fbc804a036db6, 'recaptcha');$v87cd8b8808600624d8c590cfc2e6e94b = [    'recaptcha-url' => self::WIDGET_URL,    'recaptcha-class' => 'g-recaptcha',    'recaptcha-sitekey' => $this->getSitekey(),   ];return \def_module::parseTemplate($v95d3f835e33421d88a011e7f95918ec0, $v87cd8b8808600624d8c590cfc2e6e94b);}public function getSitekey() {return Service::CaptchaSettingsFactory()    ->getCurrentSettings()    ->getSitekey();}public function getSecret() {return Service::CaptchaSettingsFactory()    ->getCurrentSettings()    ->getSecret();}public function isValid() {if (!$this->isRequired()) {return true;}$vd1fc8eaf36937be0c3ba8cfe0a2c1bfe = getRequest('g-recaptcha-response');$v5ebe2294ecd0e0f08eab7690d2a6ee69 = $this->getSecret();if (!$vd1fc8eaf36937be0c3ba8cfe0a2c1bfe || !$v5ebe2294ecd0e0f08eab7690d2a6ee69) {return false;}$ve62b9ecbd883c26642197a7dc8246d3c = false;$v4340fd73e75df7a9d9e45902a59ba3a4 = [    'Content-Type' => 'application/x-www-form-urlencoded',   ];$v21ffce5b8a6cc8cc6a41448dd69623c9 = [    'secret' => $v5ebe2294ecd0e0f08eab7690d2a6ee69,    'response' => $vd1fc8eaf36937be0c3ba8cfe0a2c1bfe,    'remoteip' => getServer('REMOTE_ADDR'),   ];$result = \umiRemoteFileGetter::get(self::VERIFICATION_URL, $ve62b9ecbd883c26642197a7dc8246d3c, $v4340fd73e75df7a9d9e45902a59ba3a4, $v21ffce5b8a6cc8cc6a41448dd69623c9);$result = json_decode($result, true);return is_array($result) && array_key_exists('success', $result) && (bool) $result['success'];}}