<?php
 class umiSubscriber extends umiObject implements iUmiSubscriber {protected $o_user;public function __construct($vb80bb7740288fda1f201890375a60c8f, $vf1965a857bc285d26fe22023aa5ab50d = false) {$v22df6b77ddb3d4a444fba472a24b327d = umiObjectsCollection::getInstance();$v8988aed53b6f4f4932b092de09f31980 = umiObjectTypesCollection::getInstance();$v3b456fa454c7082ea105317817db60eb = umiHierarchyTypesCollection::getInstance();$this->store_type = 'subscriber';$va8cfde6331bd59eb2ac96f8911c4b666 = $v22df6b77ddb3d4a444fba472a24b327d->getObject($vb80bb7740288fda1f201890375a60c8f);if ($va8cfde6331bd59eb2ac96f8911c4b666 instanceof iUmiObject) {$v5f694956811487225d15e973ca38fbab = $va8cfde6331bd59eb2ac96f8911c4b666->getTypeId();$v599dcce2998a6b40b1e38e8c6006cb0a = $v8988aed53b6f4f4932b092de09f31980->getType($v5f694956811487225d15e973ca38fbab);$v89b0b9deff65f8b9cd1f71bc74ce36ba = $v3b456fa454c7082ea105317817db60eb->getType($v599dcce2998a6b40b1e38e8c6006cb0a->getHierarchyTypeId());if ($v89b0b9deff65f8b9cd1f71bc74ce36ba->getName() === 'dispatches' && $v89b0b9deff65f8b9cd1f71bc74ce36ba->getExt() === 'subscriber') {$v9871d3a2c554b27151cacf1422eec048 = $va8cfde6331bd59eb2ac96f8911c4b666->getValue('uid');$this->o_user = $v22df6b77ddb3d4a444fba472a24b327d->getObject($v9871d3a2c554b27151cacf1422eec048);}elseif ($v89b0b9deff65f8b9cd1f71bc74ce36ba->getName() === 'users' && $v89b0b9deff65f8b9cd1f71bc74ce36ba->getExt() === 'user') {$this->o_user = $va8cfde6331bd59eb2ac96f8911c4b666;$vb80bb7740288fda1f201890375a60c8f = self::getSubscriberByUserId($vb80bb7740288fda1f201890375a60c8f);}}parent::__construct($vb80bb7740288fda1f201890375a60c8f);}public function isRegisteredUser() {return ($this->o_user instanceof iUmiObject);}public function getDispatches() {return $this->getValue('subscriber_dispatches');}public function releaseWasSent($vb80bb7740288fda1f201890375a60c8f) {return in_array($vb80bb7740288fda1f201890375a60c8f, $this->getSentReleaseIdList());}public function getSentReleaseIdList() {return (array) $this->getValue('sent_release_list');}public function putReleaseToSentList($vb80bb7740288fda1f201890375a60c8f) {$v33cea679c1647eceb076cdd0eb551fbf = $this->getSentReleaseIdList();$v33cea679c1647eceb076cdd0eb551fbf[] = $vb80bb7740288fda1f201890375a60c8f;$v33cea679c1647eceb076cdd0eb551fbf = array_unique($v33cea679c1647eceb076cdd0eb551fbf);$this->setValue('sent_release_list', $v33cea679c1647eceb076cdd0eb551fbf);return $this;}public function getFullName() {$vdc88ac0624345f4c869d4e4871c30648 = [    (string) $this->getValue('lname'),    (string) $this->getValue('fname'),    (string) $this->getValue('father_name')   ];return implode(' ', $vdc88ac0624345f4c869d4e4871c30648);}public function getEmail() {$v0c83f57c786a0b4a39efab23731c7ebc = (string) $this->getValue('email');if ($v0c83f57c786a0b4a39efab23731c7ebc === '') {$v0c83f57c786a0b4a39efab23731c7ebc = (string) $this->getName();}return $v0c83f57c786a0b4a39efab23731c7ebc;}public static function getSubscriberByUserId($v8e44f0089b076e18a718eb9ca3d94674) {$v22df6b77ddb3d4a444fba472a24b327d = umiObjectsCollection::getInstance();$v599dcce2998a6b40b1e38e8c6006cb0a = selector::get('object-type')->name('dispatches', 'subscriber');$v5f694956811487225d15e973ca38fbab = $v599dcce2998a6b40b1e38e8c6006cb0a->getId();$v8be74552df93e31bbdd6b36ed74bdb6a = new selector('objects');$v8be74552df93e31bbdd6b36ed74bdb6a->types('object-type')->id($v5f694956811487225d15e973ca38fbab);$v8be74552df93e31bbdd6b36ed74bdb6a->where('uid')->equals($v8e44f0089b076e18a718eb9ca3d94674);$v8be74552df93e31bbdd6b36ed74bdb6a->limit(0, 1);$v9367a975f19a06750b67f719f4f08ceb = $v8be74552df93e31bbdd6b36ed74bdb6a->first();if ($v9367a975f19a06750b67f719f4f08ceb) {$vd604f8ca3706bfe3334b0404ea7e69af = $v9367a975f19a06750b67f719f4f08ceb->getId();}else {$vee11cbb19052e40b07aac0ca060c23ee = $v22df6b77ddb3d4a444fba472a24b327d->getObject($v8e44f0089b076e18a718eb9ca3d94674);$v0c83f57c786a0b4a39efab23731c7ebc = $vee11cbb19052e40b07aac0ca060c23ee->getValue('e-mail');$vef21925fada6dfb684b5d8ec72114bb1 = $vee11cbb19052e40b07aac0ca060c23ee->getValue('lname');$ved89387bcd11937a7a92a99a2cbfb5d7 = $vee11cbb19052e40b07aac0ca060c23ee->getValue('fname');$v6355d006dd48e485e787c0be4fdcfb27 = $vee11cbb19052e40b07aac0ca060c23ee->getValue('father_name');$vcc90f1913b83d255b95be0e0fea6d576 = $vee11cbb19052e40b07aac0ca060c23ee->getValue('gender');$vd604f8ca3706bfe3334b0404ea7e69af = $v22df6b77ddb3d4a444fba472a24b327d->addObject($v0c83f57c786a0b4a39efab23731c7ebc, $v5f694956811487225d15e973ca38fbab);$v9367a975f19a06750b67f719f4f08ceb = $v22df6b77ddb3d4a444fba472a24b327d->getObject($vd604f8ca3706bfe3334b0404ea7e69af);if ($v9367a975f19a06750b67f719f4f08ceb instanceof iUmiObject) {$v9367a975f19a06750b67f719f4f08ceb->setName($v0c83f57c786a0b4a39efab23731c7ebc);$v9367a975f19a06750b67f719f4f08ceb->setValue('lname', $vef21925fada6dfb684b5d8ec72114bb1);$v9367a975f19a06750b67f719f4f08ceb->setValue('fname', $ved89387bcd11937a7a92a99a2cbfb5d7);$v9367a975f19a06750b67f719f4f08ceb->setValue('father_name', $v6355d006dd48e485e787c0be4fdcfb27);$v5fc732311905cb27e82d67f4f6511f7f = new umiDate(time());$v9367a975f19a06750b67f719f4f08ceb->setValue('subscribe_date', $v5fc732311905cb27e82d67f4f6511f7f);$v9367a975f19a06750b67f719f4f08ceb->setValue('gender', $vcc90f1913b83d255b95be0e0fea6d576);$v9367a975f19a06750b67f719f4f08ceb->setValue('uid', $v8e44f0089b076e18a718eb9ca3d94674);}$v9367a975f19a06750b67f719f4f08ceb->commit();}return $vd604f8ca3706bfe3334b0404ea7e69af;}public function isRegistredUser() {return $this->isRegisteredUser();}}