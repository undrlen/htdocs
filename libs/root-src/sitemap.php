<?php
 use UmiCms\Service;require_once CURRENT_WORKING_DIR . '/libs/config.php';define('SEARCH_ENGINES_SITE_MAP_URL_LIMIT', 50000);$v7f2db423a49b305459147332fb01cf87 = Service::Response()  ->getCurrentBuffer();$v7f2db423a49b305459147332fb01cf87->contentType('text/xml');$v7f2db423a49b305459147332fb01cf87->charset('utf-8');$v7f2db423a49b305459147332fb01cf87->push('<?xml version="1.0" encoding="utf-8"?>');$v8b1dc169bf460ee884fceef66c6607d6 = cmsController::getInstance();$vf6afee894b3508441e878b464a92f4b0 = Service::DomainDetector()->detect();$v72ee76c5c29383b7c9f9225c1fa4d10b = $vf6afee894b3508441e878b464a92f4b0->getId();$v67b3dba8bc6778101892eb77249db32e = $vf6afee894b3508441e878b464a92f4b0->getHost();switch (true) {case (isset($_GET['id']) && $_GET['id'] === '') : {$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = 'SELECT count(`id`) FROM `cms_sitemap` WHERE `domain_id`=%d';$vac5c74b64b4b8352ef2f181affb5ac2a = sprintf($vac5c74b64b4b8352ef2f181affb5ac2a, $v72ee76c5c29383b7c9f9225c1fa4d10b);$v9b207167e5381c47682c6b4f58a623fb = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$v9b207167e5381c47682c6b4f58a623fb->setFetchType(IQueryResult::FETCH_ROW);$v9b207167e5381c47682c6b4f58a623fb = ($v9b207167e5381c47682c6b4f58a623fb->length() > 0) ? $v9b207167e5381c47682c6b4f58a623fb->fetch() : [0];if (isset($v9b207167e5381c47682c6b4f58a623fb[0]) && (int) $v9b207167e5381c47682c6b4f58a623fb[0] > SEARCH_ENGINES_SITE_MAP_URL_LIMIT) {$v7c27c416b75c77012f5c378837e5bb19 = genSiteIndex($v72ee76c5c29383b7c9f9225c1fa4d10b, $v67b3dba8bc6778101892eb77249db32e);break;}$v7c27c416b75c77012f5c378837e5bb19 = genSiteMap($v72ee76c5c29383b7c9f9225c1fa4d10b);break;}case (isset($_GET['id']) && (int) $_GET['id'] >= 0 && (int) $_GET['id'] <= 16) : {$v7c27c416b75c77012f5c378837e5bb19 = genSiteMap($v72ee76c5c29383b7c9f9225c1fa4d10b, $_GET['id']);break;}default : {$v7c27c416b75c77012f5c378837e5bb19 = getEmptySiteMap();}}$v7f2db423a49b305459147332fb01cf87->push($v7c27c416b75c77012f5c378837e5bb19);$v7f2db423a49b305459147332fb01cf87->end();function genSiteIndex($v72ee76c5c29383b7c9f9225c1fa4d10b, $v67b3dba8bc6778101892eb77249db32e) {$v7c27c416b75c77012f5c378837e5bb19 = '<sitemapindex xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">';$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = 'SELECT `sort`, MAX(  `dt` ) FROM `cms_sitemap` WHERE `domain_id`=%d GROUP BY `sort`';$vac5c74b64b4b8352ef2f181affb5ac2a = sprintf($vac5c74b64b4b8352ef2f181affb5ac2a, $v72ee76c5c29383b7c9f9225c1fa4d10b);$v9b207167e5381c47682c6b4f58a623fb = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$v9b207167e5381c47682c6b4f58a623fb->setFetchType(IQueryResult::FETCH_ROW);foreach ($v9b207167e5381c47682c6b4f58a623fb as $vf1965a857bc285d26fe22023aa5ab50d) {list($vcadc8c8db42409733582cb3e2298ef87, $v3017d911efceb27d1de6a92b70979795) = $vf1965a857bc285d26fe22023aa5ab50d;$vdd988cfd769c9f7fbd795a0f5da8e751 = new DOMDocument();$v572d4e421e5e6b9bc11d815e8a027112 = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement('sitemap');$vce04bd8105c135f89b0dfd5d9c1e8c5d = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement('loc', sprintf('%s://%s/sitemap%d.xml', getSelectedServerProtocol(), $v67b3dba8bc6778101892eb77249db32e, $vcadc8c8db42409733582cb3e2298ef87));$v3c1bdc1738b3e10d1a55bf95ead5ba86 = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement('lastmod', date('c', strtotime($v3017d911efceb27d1de6a92b70979795)));$vdd988cfd769c9f7fbd795a0f5da8e751->appendChild($v572d4e421e5e6b9bc11d815e8a027112);$v572d4e421e5e6b9bc11d815e8a027112->appendChild($vce04bd8105c135f89b0dfd5d9c1e8c5d);$v572d4e421e5e6b9bc11d815e8a027112->appendChild($v3c1bdc1738b3e10d1a55bf95ead5ba86);$v7c27c416b75c77012f5c378837e5bb19 .= $vdd988cfd769c9f7fbd795a0f5da8e751->saveXML($v572d4e421e5e6b9bc11d815e8a027112);}$v7c27c416b75c77012f5c378837e5bb19 .= '</sitemapindex>';return $v7c27c416b75c77012f5c378837e5bb19;}function genSiteMap($v72ee76c5c29383b7c9f9225c1fa4d10b, $va6eb4816205178e88dad66a16a19ff45 = false) {$v7c27c416b75c77012f5c378837e5bb19 = '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">';$v72ee76c5c29383b7c9f9225c1fa4d10b = (int) $v72ee76c5c29383b7c9f9225c1fa4d10b;$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT `link`,`priority`,`dt` FROM `cms_sitemap` WHERE `domain_id` = $v72ee76c5c29383b7c9f9225c1fa4d10b";if ($va6eb4816205178e88dad66a16a19ff45 !== false) {$vac5c74b64b4b8352ef2f181affb5ac2a .= ' AND `sort`=%d';$vac5c74b64b4b8352ef2f181affb5ac2a = sprintf($vac5c74b64b4b8352ef2f181affb5ac2a, $va6eb4816205178e88dad66a16a19ff45);}$vac5c74b64b4b8352ef2f181affb5ac2a .= ' ORDER BY `level`;';$v9b207167e5381c47682c6b4f58a623fb = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$v9b207167e5381c47682c6b4f58a623fb->setFetchType(IQueryResult::FETCH_ROW);foreach ($v9b207167e5381c47682c6b4f58a623fb as $vf1965a857bc285d26fe22023aa5ab50d) {list($v2a304a1348456ccd2234cd71a81bd338, $v8aac9ddfd8f1554f195cfe07c8bd36f5, $v3017d911efceb27d1de6a92b70979795) = $vf1965a857bc285d26fe22023aa5ab50d;$vdd988cfd769c9f7fbd795a0f5da8e751 = new DOMDocument();$v572d4e421e5e6b9bc11d815e8a027112 = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement('url');$vce04bd8105c135f89b0dfd5d9c1e8c5d = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement('loc', $v2a304a1348456ccd2234cd71a81bd338);$vb988295c268025b49dfb3df26171ddc3 = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement('priority', $v8aac9ddfd8f1554f195cfe07c8bd36f5);$v3c1bdc1738b3e10d1a55bf95ead5ba86 = $vdd988cfd769c9f7fbd795a0f5da8e751->createElement('lastmod', date('c', strtotime($v3017d911efceb27d1de6a92b70979795)));$vdd988cfd769c9f7fbd795a0f5da8e751->appendChild($v572d4e421e5e6b9bc11d815e8a027112);$v572d4e421e5e6b9bc11d815e8a027112->appendChild($vce04bd8105c135f89b0dfd5d9c1e8c5d);$v572d4e421e5e6b9bc11d815e8a027112->appendChild($v3c1bdc1738b3e10d1a55bf95ead5ba86);$v572d4e421e5e6b9bc11d815e8a027112->appendChild($vb988295c268025b49dfb3df26171ddc3);$v7c27c416b75c77012f5c378837e5bb19 .= $vdd988cfd769c9f7fbd795a0f5da8e751->saveXML($v572d4e421e5e6b9bc11d815e8a027112);}$v7c27c416b75c77012f5c378837e5bb19 .= '</urlset>';return $v7c27c416b75c77012f5c378837e5bb19;}function getEmptySiteMap() {return '<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9"></urlset>';}